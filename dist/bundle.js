/*! For license information please see bundle.js.LICENSE.txt */
const e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(){var e=Object.defineProperty,t=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(n,r){if(r)e:{var o=t;n=n.split(".");for(var i=0;i<n.length-1;i++){var a=n[i];if(!(a in o))break e;o=o[a]}(r=r(i=o[n=n[n.length-1]]))!=i&&null!=r&&e(o,n,{configurable:!0,writable:!0,value:r})}}("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")});var n,r,o=this||self;function i(e,t){function n(){}n.prototype=t.prototype,e.qa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.oa=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function a(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{const e=Error().stack;e&&(this.stack=e)}e&&(this.message=String(e)),void 0!==t&&(this.cause=t)}function s(e){o.setTimeout(()=>{throw e},0)}i(a,Error),a.prototype.name="CustomError";e:{for(var c=["CLOSURE_FLAGS"],l=o,u=0;u<c.length;u++)if(null==(l=l[c[u]])){r=null;break e}r=l}var d,f=r&&r[610401301];n=null!=f&&f;const p=o.navigator;function h(e){return!!n&&!!d&&d.brands.some(({brand:t})=>t&&-1!=t.indexOf(e))}function g(e){var t;return(t=o.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}function y(){return!!n&&!!d&&d.brands.length>0}function m(){return y()?h("Chromium"):(g("Chrome")||g("CriOS"))&&!(!y()&&g("Edge"))||g("Silk")}function v(e,t){(t=Array.prototype.indexOf.call(e,t,void 0))>=0&&Array.prototype.splice.call(e,t,1)}function w(e){let t="",n=0;const r=e.length-10240;for(;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}d=p&&p.userAgentData||null,!g("Android")||m(),m(),g("Safari")&&(m()||!y()&&g("Coast")||!y()&&g("Opera")||!y()&&g("Edge")||(y()?h("Microsoft Edge"):g("Edg/"))||y()&&h("Opera"));const b=/[-_.]/g,k={"-":"+",_:"/",".":"="};function E(e){return k[e]||""}function S(e){return null!=e&&e instanceof Uint8Array}var A={};function T(){return x||(x=new I(null,A))}var I=class{constructor(e,t){if(M(t),this.g=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}};let x,P;function M(e){if(e!==A)throw Error("illegal external caller")}function C(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function j(){const e=Error();C(e,"incident"),s(e)}function U(e){return C(e=Error(e),"warning"),e}function N(){return"function"==typeof BigInt}function O(e){return Array.prototype.slice.call(e)}function _(e,t){return t&&Symbol.for&&e?Symbol.for(e):null!=e?Symbol(e):Symbol()}var z=_("jas",!0);_();var L=_(),R=_();function G(e,t){t[z]=-30975&e}function D(e,t){t[z]=-30941&e|34}_(),_();var B,F={},K={};function $(e){return!(!e||"object"!=typeof e||e.g!==K)}function J(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&e.constructor===Object}function V(e,t){if(null!=e)if("string"==typeof e)e=e?new I(e,A):T();else if(e.constructor!==I)if(S(e))e=e.length?new I(new Uint8Array(e),A):T();else{if(!t)throw Error();e=void 0}return e}function W(e){return!(!Array.isArray(e)||e.length||!(1&e[z]))}const q=[];function Y(e){if(2&e)throw Error()}q[z]=55,B=Object.freeze(q);var H=Object.freeze({});function X(e){return e.pa=!0,e}var Z=X(e=>"number"==typeof e),Q=X(e=>"string"==typeof e),ee=X(e=>"boolean"==typeof e),te="function"==typeof o.BigInt&&"bigint"==typeof o.BigInt(0),ne=X(e=>te?e>=oe&&e<=ae:"-"===e[0]?se(e,re):se(e,ie));const re=Number.MIN_SAFE_INTEGER.toString(),oe=te?BigInt(Number.MIN_SAFE_INTEGER):void 0,ie=Number.MAX_SAFE_INTEGER.toString(),ae=te?BigInt(Number.MAX_SAFE_INTEGER):void 0;function se(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const r=e[n],o=t[n];if(r>o)return!1;if(r<o)return!0}}let ce=0,le=0;function ue(e){const t=e>>>0;ce=t,le=(e-t)/4294967296>>>0}function de(e){if(e<0){ue(-e);const[t,n]=he(ce,le);ce=t>>>0,le=n>>>0}else ue(e)}function fe(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else N()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+pe(n)+pe(e));return n}function pe(e){return e=String(e),"0000000".slice(e.length)+e}function he(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function ge(e){return null==e||"boolean"==typeof e?e:"number"==typeof e?!!e:void 0}const ye=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function me(e){const t=typeof e;switch(t){case"bigint":return!0;case"number":return Number.isFinite(e)}return"string"===t&&ye.test(e)}function ve(e){if(null!=e){if(!Number.isFinite(e))throw U("enum");e|=0}return e}function we(e){if(null!=e){if("string"==typeof e){if(!e)return;e=+e}"number"==typeof e&&Number.isFinite(e)}}function be(e){if(null!=e)e:{if(!me(e))throw U("int64");switch(typeof e){case"string":e=Ee(e);break e;case"bigint":var t=e=BigInt.asIntN(64,e);if(Q(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(Z(t)&&!Number.isSafeInteger(t))throw Error(String(t));e=te?BigInt(e):ee(e)?e?"1":"0":Q(e)?e.trim()||"0":String(e);break e;default:e=ke(e)}}return e}function ke(e){if(e=Math.trunc(e),!Number.isSafeInteger(e)){de(e);var t=ce,n=le;(e=2147483648&n)&&(n=~n>>>0,0==(t=1+~t>>>0)&&(n=n+1>>>0));const r=4294967296*n+(t>>>0);e="number"==typeof(t=Number.isSafeInteger(r)?r:fe(t,n))?e?-t:t:e?"-"+t:t}return e}function Ee(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if(-1!==(t=e.indexOf("."))&&(e=e.substring(0,t)),!("-"===e[0]?e.length<20||20===e.length&&Number(e.substring(0,7))>-922337:e.length<19||19===e.length&&Number(e.substring(0,6))<922337)){if(e.length<16)de(Number(e));else if(N())e=BigInt(e),ce=Number(e&BigInt(4294967295))>>>0,le=Number(e>>BigInt(32)&BigInt(4294967295));else{t=+("-"===e[0]),le=ce=0;const n=e.length;for(let r=t,o=(n-t)%6+t;o<=n;r=o,o+=6){const t=Number(e.slice(r,o));le*=1e6,ce=1e6*ce+t,ce>=4294967296&&(le+=Math.trunc(ce/4294967296),le>>>=0,ce>>>=0)}if(t){const[e,t]=he(ce,le);ce=e,le=t}}if(e=ce,2147483648&(t=le))if(N())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=he(e,t);e="-"+fe(n,r)}else e=fe(e,t)}return e}function Se(e){if(null!=e&&"string"!=typeof e)throw Error();return e}function Ae(e,t,n){if(null!=e&&"object"==typeof e&&e.H===F)return e;if(Array.isArray(e)){var r=0|e[z],o=r;return 0===o&&(o|=32&n),(o|=2&n)!==r&&(e[z]=o),new t(e)}}let Te,Ie,xe,Pe,Me,Ce;function je(e){let t;return null==(t=Te)?void 0:t.get(e)}function Ue(e){try{return-1!==e.toString().indexOf("[native code]")?e:null}catch{return null}}function Ne(e,t){return Oe(t)}function Oe(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"bigint":return ne(e)?Number(e):String(e);case"boolean":return e?1:0;case"object":if(e)if(Array.isArray(e)){if(W(e))return}else{if(S(e))return w(e);if(e instanceof I){const t=e.g;return null==t?"":"string"==typeof t?t:e.g=w(t)}}}return e}function _e(e,t,n,r,o){if(null!=e){if(Array.isArray(e))e=W(e)?void 0:o&&2&e[z]?e:ze(e,t,n,void 0!==r,o);else if(J(e)){const i={};for(let a in e)i[a]=_e(e[a],t,n,r,o);e=i}else e=t(e,r);return e}}function ze(e,t,n,r,o){const i=r||n?0|e[z]:0;r=r?!!(32&i):void 0,e=O(e);for(let i=0;i<e.length;i++)e[i]=_e(e[i],t,n,r,o);return n&&n(i,e),e}function Le(e){return e.H===F?e.toJSON():Oe(e)}function Re(e,t,n=D){if(null!=e){if(e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=0|e[z];return 2&r?e:(t&&(t=0===r||!!(32&r)&&!(64&r||!(16&r))),t?(e[z]=-12293&r|34,e):ze(e,Re,4&r?D:n,!0,!0))}return e.H===F&&(e=2&(r=(n=e.m)[z])?e:new e.constructor(Ge(n,r,!0))),e}}function Ge(e,t,n){const r=n||2&t?D:G,o=!!(32&t);return e=function(e,t,n){var r=(e=O(e)).length;const o=256&t?e[r-1]:void 0;for(r+=o?-1:0,t=512&t?1:0;t<r;t++)e[t]=n(e[t]);if(o){t=e[t]={};for(const e in o)t[e]=n(o[e])}return e}(e,t,e=>Re(e,o,r)),e[z]=32|e[z]|(n?2:0),e}function De(e){const t=e.m,n=t[z];return 2&n?new e.constructor(Ge(t,n,!1)):e}function Be(e,t){return Ke(e=e.m,e[z],t)}function Fe(e,t,n,r){if(!((t=r+(+!!(512&t)-1))<0||t>=e.length||t>=n))return e[t]}function Ke(e,t,n,r){if(-1===n)return null;const o=t>>15&1023||536870912;if(!(n>=o)){var i,a=e.length;return r&&256&t&&null!=(r=e[a-1][n])?(Fe(e,t,o,n)&&null!=L&&(e=null!=(i=P)?i:P={},(i=e[L]||0)>=4||(e[L]=i+1,j())),r):Fe(e,t,o,n)}return 256&t?e[e.length-1][n]:void 0}function $e(e,t,n){const r=e.m;let o=r[z];return Y(o),Je(r,o,t,n),e}function Je(e,t,n,r){const o=t>>15&1023||536870912;if(n>=o){let i,a=t;if(256&t)i=e[e.length-1];else{if(null==r)return a;i=e[o+(+!!(512&t)-1)]={},a|=256}return i[n]=r,n<o&&(e[n+(+!!(512&t)-1)]=void 0),a!==t&&(e[z]=a),a}return e[n+(+!!(512&t)-1)]=r,256&t&&n in(e=e[e.length-1])&&delete e[n],t}function Ve(e,t,n,r){return void 0!==Ze(e,t,n=Ye(e,r)===n?n:-1)}function We(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function qe(e,t,n,r){const o=e.m;let i=o[z];return Y(i),Je(o,i,t,("0"===r?0===Number(n):n===r)?void 0:n),e}function Ye(e,t){return Xe(He(e=e.m),e,e[z],t)}function He(e){let t;return null!=(t=e[R])?t:e[R]=new Map}function Xe(e,t,n,r){let o=e.get(r);if(null!=o)return o;o=0;for(let e=0;e<r.length;e++){const i=r[e];null!=Ke(t,n,i)&&(0!==o&&(n=Je(t,n,o)),o=i)}return e.set(r,o),o}function Ze(e,t,n,r){let o=(e=e.m)[z];return(t=Ae(r=Ke(e,o,n,r),t,o))!==r&&null!=t&&Je(e,o,n,t),t}function Qe(e,t,n){if(null==(t=Ze(e,t,n,!1)))return t;let r=(e=e.m)[z];if(!(2&r)){const o=De(t);o!==t&&Je(e,r,n,t=o)}return t}function et(e,t,n){return null==n&&(n=void 0),$e(e,t,n)}function tt(e,t,n,r){null==r&&(r=void 0);e:{const a=e.m;var o=a[z];if(Y(o),null==r){var i=He(a);if(Xe(i,a,o,n)!==t)break e;i.set(n,0)}else{const e=He(i=a),r=Xe(e,i,o,n);r!==t&&(r&&(o=Je(i,o,r)),e.set(n,t))}Je(a,o,t,r)}return e}function nt(e,t){const n=e.m;let r=n[z];if(Y(r),null==t)return Je(n,r,1),e;var o,i=t;t=(null==(o=Ie)?void 0:o.get(i))||i,o=i=0|t[z];const a=We(i),s=a||Object.isFrozen(t);let c=!0,l=!0;for(let e=0;e<t.length;e++){var u=t[e];a||(u=!!(2&u.m[z]),c&&(c=!u),l&&(l=u))}return a||(i=c?13:5,i=l?16|i:-17&i),s&&i===o||(t=O(t),o=0,i=ot(i=rt(i,r),r,!0)),i!==o&&(t[z]=i),Je(n,r,1,t),e}function rt(e,t){return-2049&(2&t?2|e:-3&e)|32}function ot(e,t,n){return 32&t&&n||(e&=-33),e}function it(e,t){return null!=e?e:t}function at(e){return null!=(e=Be(e,1))&&("bigint"==typeof e?ne(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=ne(e)?Number(e):String(e)):e=me(e)?"number"==typeof e?ke(e):Ee(e):void 0),it(e,0)}function st(e,t){return it(null==(e=Be(e,t))||"string"==typeof e?e:void 0,"")}function ct(e,t){return it(e=null==(e=Be(e,t))?e:Number.isFinite(e)?0|e:void 0,0)}function lt(e,t,n,r){return Qe(e,t,n=Ye(e,r)===n?n:-1)}function ut(e){try{return Ce=!0,JSON.stringify(ft(e),Ne)}finally{Ce=!1}}var dt=class{constructor(e){e:{var t=null!=t?t:0;if(null==e){var n=96;e=[]}else{if(!Array.isArray(e))throw Error("narr");if(2048&(n=0|e[z]))throw Error("farr");if(64&n)break e;1===t||2===t||(n|=64);var r=(t=e).length;if(r&&J(t[--r])){if((t=r-(+!!(512&(n|=256))-1))>=1024)throw Error("pvtlmt");n=-33521665&n|(1023&t)<<15}}e[z]=n}this.m=e}toJSON(){return ft(this)}};function ft(e){e=e.m,e=Ce?e:ze(e,Le,void 0,void 0,!1);{var t=!Ce;let l=e.length;if(l){var n=e[l-1],r=J(n);r?l--:n=void 0;var o=e;if(r){e:{var i,a=n,s=!1;if(a)for(let e in a)if(isNaN(+e)){let t;(null!=(t=i)?t:i={})[e]=a[e]}else if(r=a[e],Array.isArray(r)&&(W(r)||$(r)&&0===r.size)&&(r=null),null==r&&(s=!0),null!=r){let t;(null!=(t=i)?t:i={})[e]=r}if(s||(i=a),i)for(let e in i){s=i;break e}s=null}a=null==s?null!=n:s!==n}for(;l>0&&(null==(i=o[l-1])||W(i)||$(i)&&0===i.size);l--)var c=!0;(o!==e||a||c)&&(t?(c||a||s)&&(o.length=l):o=Array.prototype.slice.call(o,0,l),s&&o.push(s)),c=o}else c=e}return c}function pt(e){return t=>{if(null==t||""==t)t=new e;else{if(t=JSON.parse(t),!Array.isArray(t))throw Error("dnarr");t[z]|=32,t=new e(t)}return t}}dt.prototype.H=F,dt.prototype.toString=function(){try{return Ce=!0,ft(this).toString()}finally{Ce=!1}};var ht,gt=(ht=class extends dt{},e=>{if(e=JSON.parse(e),!Array.isArray(e)){var t=typeof e;throw Error("Expected jspb data to be an array, got "+("object"!=t?t:e?Array.isArray(e)?"array":t:"null")+": "+e)}return e[z]|=34,new ht(e)}),yt=class extends dt{};function mt(e){return vt(e,e.index)>=e.g&&(e.h[e.index]=Date.now(),e.index=(e.index+1)%1,!0)}function vt(e,t){let n;return Date.now()-(null!=(n=e.h[t])?n:-1*e.g)}var wt=class{constructor(e){this.g=e,this.h=[],this.index=0}},bt=class extends dt{},kt=[2,3],Et=class extends dt{},St=class extends Error{constructor({errorType:e,message:t,i:n}){super(`Meet Add-on SDK error: ${t}${n?` - ${n}`:""}`),this.errorType=e}},At={errorType:"InternalError",message:"An unexpected error has occurred.",i:"No further information is available."},Tt={errorType:"MissingUrlParameter",message:"Missing required Meet SDK URL parameter",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect)."},It={errorType:"NeedsMainStageContext",message:"This method can only be invoked if the addon is running in the main stage.",i:"Use getFrameType to check whether the addon is running in the main stage before invoking this method."},xt={errorType:"NeedsSidePanelContext",message:"This method can only be invoked if the addon is running in the side panel.",i:"Use getFrameType to check whether the addon is running in the side panel before invoking this method."},Pt={errorType:"NotSupportedInStandalone",message:"This method is not supported in standalone mode.",i:"Do not call this method in standalone mode."},Mt={errorType:"InternalError",message:"The frame type URL parameter is set to an unexpected value.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect)."},Ct={errorType:"InvalidCloudProjectNumber",message:"Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string."},jt={errorType:"DestinationNotReady",message:"The recipient frame is not connected via the addon SDK and cannot receive the notification.",i:"Make sure the destination frame has connected before sending messages to it."},Ut={errorType:"InvalidActivityStartingState",message:"Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Nt={errorType:"ActivityStartingStateMissingAttributes",message:"The supplied ActivityStartingState object does not contain any recognized attributes.",i:"Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Ot={errorType:"ActivityStartingStateUnrecognizedAttributes",message:"The supplied ActivityStartingState object contains attributes that are not recognized.",i:"Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData."},_t={errorType:"AddonStartingStateMissingAttributes",message:"The supplied AddonStartingState object does not contain any recognized attributes.",i:"Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData."},zt={errorType:"AddonStartingStateUnrecognizedAttributes",message:"The supplied AddonStartingState object contains attributes that are not recognized.",i:"Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData."},Lt=e=>({errorType:"ArgumentNullError",message:`The argument supplied for '${e}' was 'null' but a value was expected.`,i:"Ensure you are passing a value of the expected type for the argument."}),Rt=(e,t,n)=>({errorType:"ArgumentTypeError",message:`The type '${t}' of argument supplied for '${e}' did not match the expected type '${n}'.`,i:"Ensure the type of the argument provided matches the expected type."}),Gt={errorType:"ActivityIsOngoing",message:"Operation cannot be performed while an activity is ongoing.",i:"Ensure that no activity is ongoing."},Dt={errorType:"InternalError",message:"Frame message missing required Meet SDK command.",i:"Send one of the available commands in the frame message."},Bt={errorType:"NoActivityFound",message:"No activity found.",i:"Ensure that the activity is started before performing this operation."},Ft={errorType:"RequiresEapEnrollment",message:"This feature is only available to early access partners.",i:"Meet add-on early access enrollment is currently closed."},Kt={errorType:"UserNotInitiator",message:"Operation cannot be performed because the user is not the initiator of the current activity.",i:"Ensure that the user is the initiator of the current activity or that the activity has ended."},$t={errorType:"SizeLimitExceededActivityStartingState",message:"The size of the activityStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Jt={errorType:"SizeLimitExceededFrameToFrameMessage",message:"The size of the frame to frame message exceeds the limits allowed.",i:"Ensure that the frame to frame message size is less than 1,000,000 characters."},Vt={errorType:"AddonSessionAlreadyCreated",message:"The addon session has already been created.",i:"Only instantiate the AddonSession once."},Wt={errorType:"UserCancelled",message:"The user cancelled starting an activity.",i:"The user needs to click continue to start the activity."},qt={errorType:"NotSupportedInMeetCall",message:"This method is not supported during a Meet call.",i:"Do not call this method during a Meet call."},Yt={errorType:"InvalidAddonStartingState",message:"Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Ht={errorType:"SizeLimitExceededAddonStartingState",message:"The size of the AddonStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Xt={errorType:"MeetingPolicyPreventsStartingActivity",message:"A meeting policy (such as using host control settings) prevents the user from starting the activity.",i:"Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity."};function Zt({errorType:e,message:t,i:n},r=""){throw new St({errorType:e,message:r?`${t} ${r}`:t,i:n})}function Qt(e,t){Zt({...Tt,message:`${Tt.message}: ${e}. In URL ${t}`})}function en(e){return qe(new rn,1,ve(e),0)}function tn(e,t){return qe(e,2,Se(t),"")}function nn(e,t){return qe(e,3,Se(t),"")}var rn=class extends dt{getFrameType(){return ct(this,1)}};function on(e){var t;t=void 0===H?2:4;var n=e.m[z],r=n,o=!(2&n),i=rn;t=(n=!!(2&r))?1:t,o&&(o=!n),n=Ke(e=e.m,r,1);var a=0|(n=Array.isArray(n)?n:B)[z],s=!!(4&a);if(!s){var c=a;0===c&&(c=rt(c,r)),a=n;var l=r;const e=!!(2&(c|=1));e&&(l|=2);let t=!e,o=!0,s=0,u=0;for(;s<a.length;s++){const n=Ae(a[s],i,l);if(n instanceof i){if(!e){const e=!!(2&n.m[z]);t&&(t=!e),o&&(o=e)}a[u++]=n}}u<s&&(a.length=u),c|=4,c=o?16|c:-17&c,c=t?8|c:-9&c,a[z]=c,e&&Object.freeze(a),a=c}if(o&&!(8&a||!n.length&&(1===t||4===t&&32&a))){for(We(a)&&(n=O(n),a=rt(a,r),r=Je(e,r,1,n)),o=n,i=a,a=0;a<o.length;a++)(c=o[a])!==(l=De(c))&&(o[a]=l);i|=8,i=o.length?-17&i:16|i,a=o[z]=i}let u;if(1===t||4===t&&32&a){if(!We(a)){r=a;var d=!!(32&a);(a|=!n.length||16&a&&(!s||d)?2:2048)!==r&&(n[z]=a),Object.freeze(n)}}else s=5===t&&(!!(32&a)||We(a)||!!je(n)),(2===t||s)&&We(a)&&(n=O(n),a=ot(a=rt(a,r),r,!1),n[z]=a,r=Je(e,r,1,n)),We(a)||(e=a,(a=ot(a,r,!1))!==e&&(n[z]=a)),s?u=function(e){var t;return void 0===xe&&(xe="function"==typeof Proxy?Ue(Proxy):null),(t=!xe)||(void 0===Pe&&(Pe="function"==typeof WeakMap?Ue(WeakMap):null),t=!Pe),t?e:(t=je(e))?t:Math.random()>.01?e:(function(e){if(void 0===Me){const e=new xe([],{});Me=1===Array.prototype.concat.call([],e).length}Me&&"function"==typeof Symbol&&Symbol.isConcatSpreadable&&(e[Symbol.isConcatSpreadable]=!0)}(e),function(e,t){(Te||(Te=new Pe)).set(e,t),(Ie||(Ie=new Pe)).set(t,e)}(e,t=new xe(e,{set:(e,t,n)=>(j(),e[t]=n,!0)})),t)}(n):2===t&&(null==(d=Te)||d.delete(n));return u||n}function an(e){return nt(new sn,e)}var sn=class extends dt{},cn=class extends dt{};function ln(e){return qe(new un,1,ve(e),0)}var un=class extends dt{},dn=class extends dt{},fn=class extends dt{},pn=class extends dt{},hn=class extends dt{getMeetingInfo(){return lt(this,pn,3,gn)}getMeetPlatformInfo(){return lt(this,fn,4,gn)}},gn=[2,3,4,5],yn=class extends dt{},mn=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],vn=class extends dt{},wn=class extends dt{},bn=new Map([[2,"MAIN_STAGE"],[1,"SIDE_PANEL"]]),kn=new Map([[0,"UNKNOWN"],[1,"OPEN_ADDON"],[2,"START_ACTIVITY"],[3,"JOIN_ACTIVITY"]]);function En(e){e&&"function"==typeof e.dispose&&e.dispose()}function Sn(){this.s=this.s,this.g=this.g}function An(e,t){e.s?t():(e.g||(e.g=[]),e.g.push(t))}function Tn({J:e,R:t}){if(null===e)throw new St(Lt("activityStartingState"));if(t||void 0!==e){if("object"!=typeof e)throw new St(Rt("activityStartingState",typeof e,"object"+(t?"":" | undefined")));if(void 0!==e.mainStageUrl&&"string"!=typeof e.mainStageUrl)throw new St(Rt("mainStageUrl",typeof e.mainStageUrl,"string | undefined"));if(void 0!==e.sidePanelUrl&&"string"!=typeof e.sidePanelUrl)throw new St(Rt("sidePanelUrl",typeof e.sidePanelUrl,"string | undefined"));if(void 0!==e.additionalData&&"string"!=typeof e.additionalData)throw new St(Rt("additionalData",typeof e.additionalData,"string | undefined"));if(Object.keys(e).length!==+!!e.mainStageUrl+ +!!e.sidePanelUrl+ +!!e.additionalData)throw new St(Ot);if(0===Object.keys(e).length)throw new St(Nt)}}function In(e){const t=[];return t.push(nn(tn(en(2),e.mainStageUrl),e.additionalData)),t.push(nn(tn(en(1),e.sidePanelUrl),e.additionalData)),t}Sn.prototype.s=!1,Sn.prototype.dispose=function(){this.s||(this.s=!0,this.G())},Sn.prototype[Symbol.dispose]=function(){this.dispose()},Sn.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};var xn=class extends Sn{constructor(e){super(),this.context=e,this.h={},jr(this.context.g.U,e=>{if(7===Ye(e.content,mn)){const n=this.h.frameToFrameMessage;if(e=lt(e.content,dn,7,mn),n&&e){var t=ct(e,1);if(void 0===(t=bn.get(t)))throw Error("Unknown frame type.");n({originator:t,payload:st(e,2)})}}})}async getMeetingInfo(){const e=await Yr(this.context.g,ln(2));return{meetingId:st(e.getMeetingInfo(),1),meetingCode:st(e.getMeetingInfo(),2)}}async getFrameOpenReason(){let e;const t=null!=(e=this.context.h.ca)?e:0;let n;return null!=(n=kn.get(t))?n:"UNKNOWN"}async getActivityStartingState(){var e=lt(await Yr(this.context.g,ln(1)),sn,2,gn);const t=null==e?void 0:on(e).find(e=>2===e.getFrameType());return e=null==e?void 0:on(e).find(e=>1===e.getFrameType()),{mainStageUrl:(null==t?void 0:st(t,2))||void 0,sidePanelUrl:(null==e?void 0:st(e,2))||void 0,additionalData:(null==e?void 0:st(e,3))||void 0}}async setActivityStartingState(e){Tn({J:e,R:!0});var t=In(e);e=Hr;var n=this.context.g,r=new vn;r=et(r,1,t=an(t)),await e(n,r)}on(e,t){this.h[e]=t}async getMeetPlatformInfo(){return{isMeetHardware:it(ge(Be((await Yr(this.context.g,ln(3))).getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await async function(e){var t=Zr,n=new Bn,r=new Cn;n=tt(n,11,Fn,r),await t(e,Rr(n))}(this.context.g)}async startActivity(e){Tn({J:e,R:!1});const t=new wn;e&&et(t,1,e=an(e=In(e))),await async function(e,t){var n=Zr;t=tt(new Bn,14,Fn,t),await n(e,Rr(t))}(this.context.g,t)}async endActivity(e){var t=Xr,n=this.context.g;e=qe(new cn,1,ve("aab61ee0-51b4-475d-aa4d-849f2498640d"===e?999:0),0),await t(n,e)}},Pn=pt(class extends dt{getFrameOpenReason(){return ct(this,5)}});function Mn(){var e=window.location.href,t=window.location.href,n=new URL(t).searchParams.get("meet_sdk");if(n?t=Pn(atob(n)):(Qt("meet_sdk",t),t=void 0),(n=st(t,1))||Qt("meet_addon_frame_type",e),2!==(n=Number(n))&&1!==n)throw new St(Mt);const r=st(t,2);r||Qt("meet_control_channel_name",e);const o=st(t,4);var i;return o||Qt("addon_cloud_project_number",e),{ca:e=null!=(i=t.getFrameOpenReason())?i:0,frameType:n,ba:r,cloudProjectNumber:o,S:i=st(t,3)||"https://meet.google.com"}}var Cn=class extends dt{},jn=class extends dt{},Un=class extends dt{},Nn=[1,2],On=class extends dt{},_n=class extends dt{},zn=class extends dt{},Ln=class extends dt{},Rn=class extends dt{},Gn=class extends dt{setAddonStartingState(e){return et(this,1,e)}},Dn=class extends dt{},Bn=class extends dt{},Fn=[1,2,5,6,7,8,9,10,11,13,14,15,16],Kn=class extends dt{},$n=pt(Kn),Jn=[1,2];class Vn{constructor(e,t){this.data=e,this.channel=t}}var Wn=Promise;function qn(e){const t=new MessageChannel;return Xn(t.port1,e),t}function Yn(e,t){return Xn(e,t),new Hn(e)}class Hn{constructor(e){this.g=e}send(e,t,n=[]){t=qn(t),this.g.postMessage(e,[t.port2].concat(n))}C(e,t){return new Wn(n=>{this.send(e,n,t)})}}function Xn(e,t){t&&(e.onmessage=e=>{var n=e.data;e=Yn(e.ports[0]),t(new Vn(n,e))})}var Zn="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function Qn(e,t){e.l(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}class er{constructor(e,t){this.j=e,this.l=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.j(),e}}function tr(){var e=ar;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nr=new er(()=>new rr,e=>e.reset());class rr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let or,ir=!1,ar=new class{constructor(){this.h=this.g=null}add(e,t){const n=nr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},sr=(e,t)=>{or||cr(),ir||(or(),ir=!0),ar.add(e,t)},cr=()=>{const e=Promise.resolve(void 0);or=()=>{e.then(lr)}};function lr(){let e;for(;e=tr();){try{e.h.call(e.g)}catch(e){s(e)}Qn(nr,e)}ir=!1}function ur(){}function dr(e){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,e!=ur)try{const t=this;e.call(void 0,function(e){vr(t,2,e)},function(e){vr(t,3,e)})}catch(e){vr(this,3,e)}}function fr(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}fr.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var pr=new er(function(){return new fr},function(e){e.reset()});function hr(e,t,n){const r=pr.get();return r.l=e,r.h=t,r.context=n,r}function gr(e,t){(t=hr(t=Zn(t),t)).j=!0,mr(e,t)}function yr(e,t){if(0==e.g)if(e.j){var n=e.j;if(n.h){var r=0,o=null,i=null;for(let t=n.h;t&&(t.j||(r++,t.g==e&&(o=t),!(o&&r>1)));t=t.next)o||(i=t);o&&(0==n.g&&1==r?yr(n,t):(i?((r=i).next==n.l&&(n.l=r),r.next=r.next.next):br(n),kr(n,o,3,t)))}e.j=null}else vr(e,3,t)}function mr(e,t){e.h||2!=e.g&&3!=e.g||wr(e),e.l?e.l.next=t:e.h=t,e.l=t}function vr(e,t,n){if(0==e.g){e===n&&(t=3,n=new TypeError("Promise cannot resolve to itself")),e.g=1;e:{var r=n,o=e.ma,i=e.na;if(r instanceof dr){mr(r,hr(o||ur,i||null,e));var a=!0}else{if(r)try{var s=!!r.$goog_Thenable}catch(e){s=!1}else s=!1;if(s)r.then(o,i,e),a=!0;else{if("object"==(s=typeof r)&&null!=r||"function"==s)try{const t=r.then;if("function"==typeof t){!function(e,t,n,r,o){function i(e){a||(a=!0,r.call(o,e))}let a=!1;try{t.call(e,function(e){a||(a=!0,n.call(o,e))},i)}catch(e){i(e)}}(r,t,o,i,e),a=!0;break e}}catch(t){i.call(e,t),a=!0;break e}a=!1}}}a||(e.T=n,e.g=t,e.j=null,wr(e),3!=t||n instanceof Ar||function(e,t){e.v=!0,sr(function(){e.v&&Sr.call(null,t)})}(e,n))}}function wr(e){e.B||(e.B=!0,sr(e.la,e))}function br(e){let t=null;return e.h&&(t=e.h,e.h=t.next,t.next=null),e.h||(e.l=null),t}function kr(e,t,n,r){if(3==n&&t.h&&!t.j)for(;e&&e.v;e=e.j)e.v=!1;if(t.g)t.g.j=null,Er(t,n,r);else try{t.j?t.l.call(t.context):Er(t,n,r)}catch(e){Sr.call(null,e)}Qn(pr,t)}function Er(e,t,n){2==t?e.l.call(e.context,n):e.h&&e.h.call(e.context,n)}dr.prototype.then=function(e,t,n){return function(e,t,n,r){const o=hr(null,null,null);return o.g=new dr(function(e,i){o.l=t?function(n){try{const o=t.call(r,n);e(o)}catch(e){i(e)}}:e,o.h=n?function(t){try{const o=n.call(r,t);void 0===o&&t instanceof Ar?i(t):e(o)}catch(e){i(e)}}:i}),o.g.j=e,mr(e,o),o.g}(this,Zn("function"==typeof e?e:null),Zn("function"==typeof t?t:null),n)},dr.prototype.$goog_Thenable=!0,dr.prototype.cancel=function(e){if(0==this.g){const t=new Ar(e);sr(function(){yr(this,t)},this)}},dr.prototype.ma=function(e){this.g=0,vr(this,2,e)},dr.prototype.na=function(e){this.g=0,vr(this,3,e)},dr.prototype.la=function(){let e;for(;e=br(this);)kr(this,e,this.g,this.T);this.B=!1};var Sr=s;function Ar(e){a.call(this,e)}function Tr(e,t,n){this.promise=e,this.resolve=t,this.reject=n}i(Ar,a),Ar.prototype.name="cancel";let Ir=1,xr=new WeakMap;function Pr(e,t,n){var r=Cr;e.h.has(t),r(t,n)}var Mr=class extends Sn{constructor(){super(),this.h=new Set}signal(){const e=new Ur;return this.h.add(e),An(this,function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}(En,e)),e}};function Cr(e,t){return new Promise(n=>{_r(()=>{e.L&&(e.ea=t,e.P=!0);for(const{I:n,slot:r}of e.o.values())try{r(t,{signal:e,I:n})}catch(e){s(e)}for(const n of e.A)n.resolve(t);e.A.clear(),n()})})}function jr(e,t,n){const r=Ir++;return _r(()=>{!function(e,t,n,r){if(!e.s)if(r){if(!r.s){const o=()=>{_r(()=>{e.o.delete(t);const n=xr.get(r);n&&v(n,o)})};e.o.set(t,{I:t,slot:n,F:o}),Lr(r,o)}}else e.o.set(t,{I:t,slot:n,F:()=>e.o.delete(t)})}(e,r,t,n)}),r}var Ur=class extends Sn{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(e){_r(()=>{const t=this.o.get(e);t&&t.F()})}value(e){return this.promise(!0,e)}next(e){return this.promise(!1,e)}promise(e,t){const n=function(){let e,t;return new Tr(new dr(function(n,r){e=n,t=r}),e,t)}();return _r(()=>{if(this.s)n.reject(new Ar("Signal initially disposed"));else if(t&&t.s)n.reject(new Ar("Owner initially disposed"));else if(e&&this.L&&this.P)n.resolve(this.ea);else if(this.A.add(n),gr(n.promise,()=>{this.A.delete(n)}),t){const e=()=>{n.reject(new Ar("Owner asynchronously disposed"))};gr(n.promise,()=>{const n=xr.get(t);n&&v(n,e)}),Lr(t,e)}}),n.promise}G(){super.G(),_r(()=>{for(const{F:e}of this.o.values())e();this.o.clear();for(const e of this.A)e.reject(new Ar("Signal asynchronously disposed"));this.A.clear()})}};const Nr=[];let Or=!1;function _r(e){Nr.push(e),async function(){if(!Or)try{Or=!0;let e=zr(0);for(;e<Nr.length;)await Promise.resolve(),e=zr(e)}catch(e){s(e)}finally{Nr.length=0,Or=!1}}()}function zr(e){const t=e+100;for(;e<t&&e<Nr.length;)try{Nr[e++]()}catch(e){s(e)}return e}function Lr(e,t){if(e.s)t();else{var n=xr.get(e);if(n)n.push(t);else{const n=[t];xr.set(e,n),An(e,()=>{for(const e of[...n])e();xr.delete(e)})}}}function Rr(e){return{content:ut(e=tt(new Kn,1,Jn,e))}}const Gr=new Mr;function Dr(e,t){const n=Gr.signal();return{channel:Yn(e,e=>{const r=t(e.data);Pr(Gr,n,{content:r,ka:e})}),signal:n}}let Br;var Fr=class extends dt{},Kr=class extends dt{},$r=class extends dt{h(){return lt(this,Fr,2,Jr)}g(){return Ve(this,Fr,2,Jr)}j(){return lt(this,Kr,3,Jr)}l(){return Ve(this,Kr,3,Jr)}},Jr=[2,3],Vr=pt(class extends dt{}),Wr=pt(class extends dt{}),qr=[1,2];async function Yr(e,t){var n=Zr;let r;return t=tt(new Bn,9,Fn,t),e=await n(e,Rr(t)),null==(r=lt($n(e.data.content),yn,2,Jn))?void 0:lt(r,hn,9,mn)}async function Hr(e,t){var n=Zr;t=tt(new Bn,8,Fn,t),await n(e,Rr(t))}async function Xr(e,t){var n=Zr;t=tt(new Bn,15,Fn,t),await n(e,Rr(t))}async function Zr(e,t){let n;(e=await e.channel.C(t))||Zt(At,`Falsy response received from the message channel. ${JSON.stringify(e)}`),(t=e.data)||Zt(At,`Data field in the response from the message channel is falsy. ${JSON.stringify(t)}`),(t=t.content)||Zt(At,`Content field in the response from the message channel is falsy. ${JSON.stringify(t)}`);try{n=$n(t)}catch(e){Zt(At,`The ControlMessage can't be deserialized. ${JSON.stringify(t)}. ${JSON.stringify(e)}`)}if((t=lt(n,yn,2,Jn))||Zt(At,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(t)}`),void 0!==(null==(t=null==t?void 0:lt(t,Et,10,mn))?void 0:ct(t,1)))throw new St(function(e){switch(e){case 0:default:return At;case 1:return jt;case 2:return Ut;case 3:return Gt;case 4:return Dt;case 5:return Ft;case 6:return Pt;case 7:return Kt;case 8:return $t;case 9:return Jt;case 10:return Wt;case 11:return qt;case 12:return Yt;case 13:return Ht;case 14:return Bt;case 15:return Xt}}(ct(t,1)));return e}async function Qr(e){const t=function(){var e=new Un,t=new jn;return tt(e,1,Nn,t)}(),{channel:n,response:r}=await async function(e,t){var n,r=Zr;return t=tt(new Bn,1,Fn,t),e=(r=await r(e,Rr(t))).data.messagePort,n=null!=(r=null==(n=lt($n(r.data.content),yn,2,Jn))?void 0:lt(n,bt,1,mn))?r:qe(n=new bt,1,ve(0),0),{channel:e?Dr(e,e=>Wr(e)):void 0,response:n}}(e,t);if(!n)throw new St(function(e){let t;var n=null!=(t=ct(e,1))?t:0;switch(e=function(e){switch(e){case 2:return"co";case 3:return"gd";default:return"unknown"}}(Ye(e,kt)),n){case 1:return{errorType:"InternalError",message:`Could not connect to ${e} channel. Meet did not respond with a MessagePort.`,i:"No further information is available."};case 2:return{errorType:"InternalError",message:`Could not connect to ${e}. A conflicting ${e} exists.`,i:"No further information is available."};case 3:return{errorType:"InternalError",message:`Could not connect to ${e} channel. The addon does not have permission to open a ${e}.`,i:"This method might require EAP enrollment."};case 4:return{errorType:"InternalError",message:`Could not connect to ${e} channel. The addon is not authorized for this ${e}.`,i:"No further information is available."};case 0:default:return(e=>({errorType:"InternalError",message:`Could not connect to ${e} channel. Unknown error`,i:"No further information is available."}))(e);case 5:return"co"===e?{errorType:"InternalError",message:`Could not connect to ${e} channel. The coActivity was not found.`,i:`Consider starting the ${e} only after after the startActivity promise returns.`}:{errorType:"InternalError",message:`Could not connect to ${e} channel.`,i:"No further information is available."}}}(r));return n}async function eo(e,t,n){var r=Zr,o=new Bn;t=qe(new zn,1,ve(t),0),n=qe(t,2,Se(n),""),o=tt(o,7,Fn,n),await r(e,Rr(o))}class to extends Sn{constructor(e,t,n){super(),this.U=e,this.channel=t,this.h=function(e){var t=new wt(100),n=Promise.resolve();return(...r)=>mt(t)?e(...r):n}(async()=>{var e=this.channel,t=e.C,n=new Bn,r=new Ln;n=tt(n,13,Fn,r),await t.call(e,Rr(n))}),e=function(){var e=Br||(Br=gt("[1,2,0]"));const t=(e=$e(e=De(e),4,Se("dev-706864954"))).m,n=t[z];return 2&n?e:new e.constructor(Ge(t,n,!0))}(),st(e,4),we(Be(e,1)),we(Be(e,2)),we(Be(e,3)),n=function(e,t){return tt(e,2,Fn,t)}(new Bn,function(e,t){return qe(e,3,Se(t),"")}(function(e){return et(new On,2,e)}(e),n)),this.channel.send(Rr(n)),jr(this.U,async e=>{16===Ye(e.content,mn)&&await async function(e){await e.h()}(this)})}}let no;var ro=class{constructor(e){var t=no;this.h=e,this.g=t}delete(){throw Error("Not implemented.")}},oo=class extends dt{h(){return lt(this,Fr,2,io)}g(){return Ve(this,Fr,2,io)}j(){return lt(this,Kr,3,io)}l(){return Ve(this,Kr,3,io)}},io=[2,3],ao=class extends dt{},so=class extends dt{},co=class extends dt{},lo=class extends dt{h(){return lt(this,Fr,2,uo)}g(){return Ve(this,Fr,2,uo)}j(){return lt(this,Kr,3,uo)}l(){return Ve(this,Kr,3,uo)}},uo=[2,3],fo=[5,6],po=class extends dt{},ho=class extends dt{},go=[1,2,3],yo=class extends Error{constructor(){super("Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing")}},mo=class{constructor(e){this.config=e}start(){return null!=this.g||(this.g=setInterval(()=>{this.config.ha()},this.config.da)),this}shutdown(){clearInterval(this.g)}};function vo(){const e=new Map,t={set:(n,r)=>(e.set(n,r),t),D:()=>e};return t}function wo(e){if(e.g()){var t=(e=e.h().m)[z],n=Ke(e,t,1),r=V(n,!0);if(null!=r&&r!==n&&Je(e,t,1,r),t=null==(e=r)?T():e,e=Uint8Array,M(A),null!=(n=t.g)&&!S(n))if("string"==typeof n){b.test(n)&&(n=n.replace(b,E)),n=atob(n),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);n=r}else n=null;return{bytes:new e((t=null==n?n:t.g=n)||0)}}}function bo(e,t){return t=Eo(t),tt(e,2,uo,t),e}function ko(e,t){return t=Eo(t),tt(e,2,io,t),e}function Eo(e){return qe(new Fr,1,V(e.bytes,!1),T())}function So(e){if(e.l()){var t,n,r=st(e=e.j(),1),o=null!=(n=null==(t=Qe(e,yt,2))?void 0:at(t))?n:0;let i=(n=e.m)[z];const a=Ke(n,i,4);return null!=(t=null==a||"number"==typeof a?a:"NaN"===a||"Infinity"===a||"-Infinity"===a?Number(a):void 0)&&t!==a&&Je(n,i,4,t),{mediaId:r,mediaPlayoutPosition:o,mediaPlayoutRate:it(t,0),playbackState:Io.get(ct(e,3))}}}function Ao(e,t){return t=Po(t),tt(e,3,uo,t),e}function To(e,t){return t=Po(t),tt(e,3,io,t),e}const Io=vo().set(0,"INVALID").set(1,"BUFFERING").set(2,"PLAY").set(3,"PAUSE").set(4,"ENDED").D(),xo=vo().set("INVALID",0).set("BUFFERING",1).set("PLAY",2).set("PAUSE",3).set("ENDED",4).D();function Po(e){var t=new Kr;t=qe(t,1,Se(e.mediaId),"");var n=e.mediaPlayoutRate;if(null!=n&&"number"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);return t=qe(t,4,n,0),n=qe(n=new yt,1,be(e.mediaPlayoutPosition),"0"),qe(t=et(t,2,n),3,ve(e=xo.get(e.playbackState)),0)}function Mo(e,t){return t=qe(new so,1,ve(t.u),0),tt(e,6,fo,t),e}function Co(e){var t=new ao;return tt(e,5,fo,t),e}const jo=vo().set("co-doing",1).set("co-watching",2).D();async function Uo(e,t,n){var r=t.C,o=new ho,i=new po;let a;if(i=qe(i,1,Se(e.activityTitle),""),i=qe(i,2,ve(jo.get(e.K)),0),o=tt(o,3,go,i),null!=(a=it(ge(Be(r=await r.call(t,o,Vr),1)),!1))&&a)return new _o(e,t,n,Qe(r,$r,2));throw new yo}function No(e,t){const n=e.config.N(t);n&&!e.config.M(e.g,n)&&(e.g=n,e.j=at(t),e.v(e.g))}function Oo(e,t){const{state:n,fa:r,context:o}=t(e.g);e.g=n,e.notify(e.g,o,r)}class _o{constructor(e,t,n,r){this.l=e,this.h=t,this.config=n,this.v=function(e){var t=new wt(500);let n,r=0;return(...o)=>{mt(t)?e(...o):(n=()=>{e(...o)},r||(r=setTimeout(()=>{let e;r=0,null==(e=n)||e()},function(e){const t=e.g;return(e=vt(e,e.index))>=t?0:t-e}(t))))}}(e=>{this.l.O(e)}),function(e,t){const n=jr(e.signal,e=>{t(e)});e.o.push(n)}(this.h,e=>{const t=Ye(e,qr);switch(t){case 1:No(this,lt(e,$r,1,qr));break;case 2:case 0:console.warn(`IllegalMessage: ${t} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new mo({da:1e3,ha:()=>{var e,t,n=null==(t=(e=this.l).ja)?void 0:t.call(e);if(null!==this.g){this.g={...this.g,...n},e=new ho,n=(t=this.config).W;var r=new oo;r=qe(r,1,be(this.j),"0"),t=n.call(t,r,this.g),e=tt(e,1,go,t),this.h.send(e)}}}).start(),this.g=null,this.j=0,r&&No(this,r)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(e,t,n){var r=n?function({activityTitle:e}){return $e(new co,4,Se(e))}(n):void 0,o=(n=this.config).X,i=new lo;r=et(i=qe(i,1,be(this.j),"0"),4,r),e=o.call(n,r,e),e=this.config.V(e,t),n=(t=this.h).send,e=tt(o=new ho,2,go,e),n.call(t,e)}}var zo=class{constructor(e){this.g=e}broadcastStateUpdate(e){Oo(this.g,()=>({state:e,context:{}}))}disconnect(){this.g.disconnect()}};function Lo(e,t){return null!=e&&null!=t&&e.bytes.length===t.bytes.length&&e.bytes.every((e,n)=>e===t.bytes[n])}var Ro=class{constructor(e){this.g=e}notifySwitchedToMedia(e,t,n){Oo(this.g,()=>({state:{mediaId:t,mediaPlayoutRate:1,mediaPlayoutPosition:n,playbackState:"PLAY"},fa:{activityTitle:e},context:{u:1}}))}notifyPauseState(e,t){Oo(this.g,n=>{if(null==n)throw Error("Invalid before coWatchingState");return{state:{...n,playbackState:e?"PAUSE":"PLAY",mediaPlayoutPosition:t},context:{u:3}}})}notifySeekToTimestamp(e){Oo(this.g,t=>{if(null==t)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e},context:{u:2}}})}notifyPlayoutRate(e){Oo(this.g,t=>{if(null==t)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutRate:e},context:{u:4}}})}notifyBuffering(e){Oo(this.g,t=>{if(null==t)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e,playbackState:"BUFFERING"},context:{u:3}}})}notifyReady(e){Oo(this.g,t=>{if(null==t)throw Error("Invalid before coWatchingState");return{state:{...t,mediaPlayoutPosition:e},context:{u:3}}})}disconnect(){this.g.disconnect()}};function Go(e,t){if(null==e||null==t)return!1;const n="PLAY"===e.playbackState?3*Math.max(e.mediaPlayoutRate,1):0,r=Math.abs(e.mediaPlayoutPosition-t.mediaPlayoutPosition);return e.mediaId===t.mediaId&&e.mediaPlayoutRate===t.mediaPlayoutRate&&r<=n&&e.playbackState===t.playbackState}var Do=class{constructor(e,t){this.channel=e,this.signal=t,this.o=[]}send(e){this.channel.send(ut(e))}async C(e,t){return t((e=await this.channel.C(ut(e))).data)}shutdown(){this.o.forEach(e=>{this.signal.detach(e)})}};async function Bo(e){const t=new Mr,n=t.signal();!function(e,t,n,r=e=>e){jr(n,n=>{Pr(e,t,r(n))},e)}(t,n,(e=await e).signal,e=>e.content);const{ia:r,ga:o}=function(e,t){var n=Fo;const r=e.signal(),o=e.signal();return jr(t,t=>{const i=n(t)?r:o;Pr(e,i,t)},e),{ia:r,ga:o}}(t,n);return{Z:new Do(e.channel,r),aa:new Do(e.channel,o)}}function Fo(e){if(1!==Ye(e,qr))throw Error("CA Message arrived with no known content message set");return(e=lt(e,$r,1,qr)).g()}var Ko=class extends xn{async notifySidePanel(e){await eo(this.context.g,1,e)}async unloadSidePanel(){await async function(e){var t=Zr,n=new Bn,r=new Dn;n=tt(n,5,Fn,r),await t(e,Rr(n))}(this.context.g)}async loadSidePanel(){await async function(e){var t=Zr,n=new Bn,r=new _n;n=tt(n,6,Fn,r),await t(e,Rr(n))}(this.context.g)}},$o=class extends xn{async setAddonStartingState(e){if(null===e)throw new St(Lt("addonStartingState"));if("object"!=typeof e)throw new St(Rt("addonStartingState",typeof e,"object | undefined"));if(void 0!==e.sidePanelUrl&&"string"!=typeof e.sidePanelUrl)throw new St(Rt("sidePanelUrl",typeof e.sidePanelUrl,"string | undefined"));if(void 0!==e.additionalData&&"string"!=typeof e.additionalData)throw new St(Rt("additionalData",typeof e.additionalData,"string | undefined"));if(Object.keys(e).length!==+!!e.sidePanelUrl+ +!!e.additionalData)throw new St(zt);if(0===Object.keys(e).length)throw new St(_t);var t=[];t.push(nn(tn(en(1),e.sidePanelUrl),e.additionalData)),e=this.context.g;var n=new Gn,r=n.setAddonStartingState;t=nt(new Rn,t),await async function(e,t){var n=Zr;t=tt(new Bn,16,Fn,t),await n(e,Rr(t))}(e,r.call(n,t))}},Jo=class extends xn{async notifyMainStage(e){await eo(this.context.g,2,e)}},Vo=class{constructor(e){e=e.cloudProjectNumber;const t=Mn();if(t.cloudProjectNumber!==e)throw new St(Ct);const n=t.S,r=t.ba;let o;no=null!=(o=no)?o:function(e,t,n){const r=new Mr,o=r.signal();return e=(({destination:e,origin:t,ra:n,Y:r="ZNWN1d",onMessage:o})=>{if("*"===t)throw Error("Sending to wildcard origin not allowed.");const i=qn(o);return e.postMessage(n?{n:r,t:n}:r,t,[i.port2]),Yn(i.port1,o)})({destination:window.parent,origin:t,Y:e,onMessage:e=>{const t=$n(e.data.content);2===Ye(t,Jn)&&Pr(r,o,{content:lt(t,yn,2,Jn),ka:e,messagePort:e.data.messagePort})}}),new to(o,e,n)}(r,n,e),this.g=new ro(t)}async createMainStageClient(){var e=this.g;if(2!==e.h.frameType)throw new St(It);return await Promise.resolve(new Ko(e))}async createSidePanelClient(){var e=this.g;if(1!==e.h.frameType)throw new St(xt);return await Promise.resolve(new Jo(e))}async createCoWatchingClient(e){return await async function(e,t){if(({aa:e}=await Bo(Qr(e.g))),t=await async function(e,t){if(t)return e=await Uo({activityTitle:t.activityTitle,K:"co-watching",ja:()=>t.onCoWatchingStateQuery(),O:e=>{t.onCoWatchingStateChanged(e)}},e,{X:Ao,W:To,V:Mo,N:So,M:Go}),new Ro(e)}(e,t),!t)throw Error("Failed to create co-watching session");return t}(this.g,e)}async createCoDoingClient(e){return await async function(e,t){if(({Z:e}=await Bo(Qr(e.g))),t=await async function(e,t){if(t)return e=await Uo({activityTitle:t.activityTitle,K:"co-doing",O:e=>{t.onCoDoingStateChanged(e)}},e,{X:bo,W:ko,V:Co,N:wo,M:Lo}),new zo(e)}(e,t),!t)throw Error("Failed to create co-doing session");return t}(this.g,e)}async createRoomsStandaloneClient(){var e=this.g;if(2!==e.h.frameType)throw new St(It);return await Promise.resolve(new $o(e))}};let Wo=null;var qo,Yo={addon:{getFrameType:function(){e:{var e=Mn().frameType;switch(e){case 2:e="MAIN_STAGE";break e;case 1:e="SIDE_PANEL";break e;default:throw Error(`Unknown frame type: ${e}`)}}return e},createAddonSession:async function(e){if(null===e)throw new St(Lt("config"));if("object"!=typeof e)throw new St(Rt("config",typeof e,"object"));if("string"!=typeof e.cloudProjectNumber)throw new St(Rt("cloudProjectNumber",typeof e.cloudProjectNumber,"string"));if(Wo&&"integration.test.google.com"!==Mn().S)throw new St(Vt);return Wo=new Vo(e)}}},Ho=["meet"],Xo=o;Ho[0]in Xo||void 0===Xo.execScript||Xo.execScript("var "+Ho[0]);for(;Ho.length&&(qo=Ho.shift());)Ho.length||void 0===Yo?Xo=Xo[qo]&&Xo[qo]!==Object.prototype[qo]?Xo[qo]:Xo[qo]={}:Xo[qo]=Yo}).apply(e);const t=e.meet;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,i,a){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return o(u,"_invoke",function(n,r,o){var i,a,s,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,s=e,f.n=n,c}};function p(n,r){for(a=n,s=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,i=u[t],p=f.p,h=i[2];n>3?(o=h===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,f.v=r,f.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,a=0))}if(o||n>1)return c;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),a=u,s=h;(t=a<2?e:s)||!d;){i||(a?a<3?(a>1&&(f.n=-1),p(a,s)):f.n=s:f.v=s);try{if(l=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(t){i=e,a=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][i]?t(t([][i]())):(o(t={},i,function(){return this}),t),p=d.prototype=l.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,o(p,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,i,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:h}})()}function o(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)})}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.credentials=t,this.participants=new Map,this.isConnected=!1,this.meetingId=null,this.meetSession=null,this.eventsBackendUrl=(null==t?void 0:t.eventsBackendUrl)||null,this.developerPreviewEnabled=!0,this.onParticipantJoined=null,this.onParticipantLeft=null,this.onAudioData=null,this.onError=null},t=[{key:"initializeAuth",value:(f=a(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Initializing Google Meet Add-ons SDK..."),this.meetSession=this.credentials.meetSession,this.meetSession){e.n=1;break}throw new Error("Meet session not available");case 1:return console.log("✅ Google Meet Add-ons SDK initialized"),e.a(2,!0);case 2:throw e.p=2,t=e.v,console.error("❌ Authentication failed:",t),t;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return f.apply(this,arguments)})},{key:"getCurrentParticipants",value:(d=a(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.meetSession){e.n=1;break}throw new Error("Meet session not initialized");case 1:return e.n=2,this.fetchParticipantsViaWorkspaceEvents();case 2:if(!((t=e.v)&&t.length>0)){e.n=3;break}return e.a(2,t);case 3:return console.log("⚠️ Meet Add-ons SDK has limited participant access"),console.log("📋 No participants available via API"),e.a(2,[]);case 4:return e.p=4,n=e.v,console.error("Error getting current participants:",n),e.a(2,[])}},e,this,[[0,4]])})),function(){return d.apply(this,arguments)})},{key:"fetchParticipantsViaWorkspaceEvents",value:(u=a(r().m(function e(){var t,n,o,i,a,s,c;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.eventsBackendUrl){e.n=1;break}return e.a(2,[]);case 1:if(!this.meetSession||!this.meetSession.getMeetingInfo){e.n=3;break}return e.n=2,this.meetSession.getMeetingInfo();case 2:s=e.v,e.n=4;break;case 3:s=null;case 4:if(n=(null==(t=s)?void 0:t.meetingId)||(null==t?void 0:t.id)||this.meetingId){e.n=5;break}return e.a(2,[]);case 5:return o="".concat(this.eventsBackendUrl.replace(/\/$/,""),"/participants?meetingId=").concat(encodeURIComponent(n)),e.n=6,fetch(o,{method:"GET",credentials:"omit"});case 6:if((i=e.v).ok){e.n=7;break}return console.warn("Workspace Events backend returned non-OK status:",i.status),e.a(2,[]);case 7:return e.n=8,i.json();case 8:if(a=e.v,Array.isArray(a)){e.n=9;break}return e.a(2,[]);case 9:return e.a(2,a.map(function(e){return{id:e.id||e.participantId||e.name||"participant_".concat(Math.random().toString(36).slice(2)),name:e.name||e.displayName||"Unknown Participant",email:e.email||"",isLocal:!!e.isLocal,isSpeaking:!1,avatar:"👤",transcript:"",lastSpoke:null,joinedAt:(new Date).toISOString()}}));case 10:return e.p=10,c=e.v,console.warn("Failed to fetch participants via Workspace Events backend:",c),e.a(2,[])}},e,this,[[0,10]])})),function(){return u.apply(this,arguments)})},{key:"getMeetingInfo",value:(l=a(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.meetSession){e.n=1;break}throw new Error("Meet session not initialized");case 1:return console.log("⚠️ Meet Add-ons SDK has limited meeting info access"),e.a(2,{meetingId:this.meetingId||null,title:"Google Meet Session",startTime:(new Date).toISOString(),participantCount:this.participants.size});case 2:return e.p=2,t=e.v,console.error("Error getting meeting info:",t),e.a(2,{})}},e,this,[[0,2]])})),function(){return l.apply(this,arguments)})},{key:"startParticipantTracking",value:(c=a(r().m(function e(){var t,n,o=this;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("Starting participant tracking with Meet Add-ons SDK..."),e.n=1,this.getCurrentParticipants();case 1:(t=e.v).length>0?(console.log("Found participants:",t.length),t.forEach(function(e){o.handleParticipantJoined(e)})):console.log("No participants found via API"),console.log("✅ Participant tracking started"),e.n=3;break;case 2:throw e.p=2,n=e.v,console.error("Error starting participant tracking:",n),n;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return c.apply(this,arguments)})},{key:"handleParticipantJoined",value:function(e){try{var t={id:e.id||e.participantId||"participant_".concat(Date.now()),name:e.name||e.displayName||"Unknown Participant",email:e.email||"",isLocal:e.isLocal||!1,isSpeaking:e.isSpeaking||!1,avatar:e.avatar||"👤",transcript:"",lastSpoke:null,joinedAt:(new Date).toISOString()};this.participants.set(t.id,t),console.log("Participant joined:",t),this.onParticipantJoined&&this.onParticipantJoined(t)}catch(e){console.error("Error handling participant joined:",e)}}},{key:"handleParticipantLeft",value:function(e){try{var t=this.participants.get(e);t&&(this.participants.delete(e),console.log("Participant left:",t),this.onParticipantLeft&&this.onParticipantLeft(t))}catch(e){console.error("Error handling participant left:",e)}}},{key:"getAllParticipants",value:function(){return Array.from(this.participants.values())}},{key:"getParticipant",value:function(e){return this.participants.get(e)}},{key:"updateParticipantSpeaking",value:function(e,t){var n=this.participants.get(e);n&&(n.isSpeaking=t,t&&(n.lastSpoke=(new Date).toISOString()),this.onParticipantJoined&&this.onParticipantJoined(n))}},{key:"updateParticipantTranscript",value:function(e,t){var n=this.participants.get(e);n&&(n.transcript=t,n.lastSpoke=(new Date).toISOString(),this.onParticipantJoined&&this.onParticipantJoined(n))}},{key:"startAudioMonitoring",value:(i=a(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Starting audio monitoring..."),this.developerPreviewEnabled){e.n=1;break}return console.log("⚠️ Developer Preview not enabled. Skipping Meet Media API audio."),e.a(2,!0);case 1:return console.log("📋 Meet Media API audio capture requires a separate client (WebRTC) joining the call."),console.log("📋 Implement a backend or native client to join and forward audio to this add-on."),e.a(2,!0);case 2:throw e.p=2,t=e.v,console.error("Error starting audio monitoring:",t),t;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"stopAudioMonitoring",value:(o=a(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("Stopping audio monitoring..."),e.a(2,!0);case 1:throw e.p=1,t=e.v,console.error("Error stopping audio monitoring:",t),t;case 2:return e.a(2)}},e,null,[[0,1]])})),function(){return o.apply(this,arguments)})},{key:"leaveMeeting",value:(n=a(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("Leaving meeting..."),this.participants.clear(),this.isConnected=!1,console.log("✅ Left meeting successfully"),e.a(2,!0);case 1:throw e.p=1,t=e.v,console.error("Error leaving meeting:",t),t;case 2:return e.a(2)}},e,this,[[0,1]])})),function(){return n.apply(this,arguments)})}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,i,c,l,u,d,f}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return f(l,"_invoke",function(n,r,o){var i,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,i=u[t],p=f.p,h=i[2];n>3?(o=h===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,o,i),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),p=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,f(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,f(p,"constructor",l),f(l,"constructor",c),c.displayName="GeneratorFunction",f(l,o,"GeneratorFunction"),f(p),f(p,o,"Generator"),f(p,r,function(){return this}),f(p,"toString",function(){return"[object Generator]"}),(d=function(){return{w:i,m:h}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){function i(t,n){f(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},f(e,t,n,r)}function p(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,s,"next",e)}function s(e){p(i,r,o,a,s,"throw",e)}a(void 0)})}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var m=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.credentials=t,this.proxyUrl=(null==t?void 0:t.proxyUrl)||null,this.accessToken=null,this.isActive=!1,this.pollInterval=null,this.conferenceRecord=null,this.transcript=null,this.lastEntryTime=null,this.onTranscriptUpdate=null,this.onError=null,this.pollIntervalMs=2e3},t=[{key:"initializeAuth",value:(u=h(d().m(function e(t){var n;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Initializing Google Meet Transcript API..."),t){e.n=1;break}throw new Error("Access token is required for Google Meet API");case 1:return this.accessToken=t,console.log("✅ Google Meet Transcript API initialized"),e.a(2,!0);case 2:throw e.p=2,n=e.v,console.error("❌ Authentication failed:",n),n;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return u.apply(this,arguments)})},{key:"getAccessToken",value:(l=h(d().m(function e(){var t,n;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,null===(t=this.credentials)||void 0===t||!t.meetSession){e.n=1;break}return e.a(2,this.accessToken);case 1:return e.a(2,this.accessToken);case 2:return e.p=2,n=e.v,console.error("Error getting access token:",n),e.a(2,null)}},e,this,[[0,2]])})),function(){return l.apply(this,arguments)})},{key:"lookupSpace",value:(c=h(d().m(function e(t){var n,r,o,i,a,s,c;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getAccessToken();case 1:if(n=e.v){e.n=2;break}throw new Error("Access token not available");case 2:return r=this.proxyUrl||"http://localhost:8787",o="".concat(r,"/api/lookupSpace?meetingCode=").concat(encodeURIComponent(t)),console.log("Looking up space for meeting code:",t),e.n=3,fetch(o,{method:"GET",headers:{"x-access-token":n,"Content-Type":"application/json"}});case 3:if((i=e.v).ok){e.n=5;break}return e.n=4,i.text();case 4:throw a=e.v,new Error("Failed to lookup space: ".concat(i.status," ").concat(i.statusText,". ").concat(a));case 5:return e.n=6,i.json();case 6:return s=e.v,console.log("✅ Space lookup successful:",s),e.a(2,s);case 7:throw e.p=7,c=e.v,console.error("Error looking up space:",c),c;case 8:return e.a(2)}},e,this,[[0,7]])})),function(e){return c.apply(this,arguments)})},{key:"getConferenceRecords",value:(s=h(d().m(function e(t){var n,r,o,i,a,s,c;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getAccessToken();case 1:if(n=e.v){e.n=2;break}throw new Error("Access token not available");case 2:return r=this.proxyUrl||"http://localhost:8787",o="".concat(r,"/api/conferenceRecords?spaceName=").concat(encodeURIComponent(t)),console.log("Fetching conference records for space:",t),e.n=3,fetch(o,{method:"GET",headers:{"x-access-token":n,"Content-Type":"application/json"}});case 3:if((i=e.v).ok){e.n=5;break}return e.n=4,i.text();case 4:throw a=e.v,new Error("Failed to get conference records: ".concat(i.status," ").concat(i.statusText,". ").concat(a));case 5:return e.n=6,i.json();case 6:return s=e.v,console.log("✅ Conference records fetched:",s),e.a(2,s);case 7:throw e.p=7,c=e.v,console.error("Error getting conference records:",c),c;case 8:return e.a(2)}},e,this,[[0,7]])})),function(e){return s.apply(this,arguments)})},{key:"getTranscripts",value:(a=h(d().m(function e(t){var n,r,o,i,a,s,c;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getAccessToken();case 1:if(n=e.v){e.n=2;break}throw new Error("Access token not available");case 2:return r=this.proxyUrl||"http://localhost:8787",o="".concat(r,"/api/transcripts?conferenceRecord=").concat(encodeURIComponent(t)),console.log("Fetching transcripts for conference record:",t),e.n=3,fetch(o,{method:"GET",headers:{"x-access-token":n,"Content-Type":"application/json"}});case 3:if((i=e.v).ok){e.n=5;break}return e.n=4,i.text();case 4:throw a=e.v,new Error("Failed to get transcripts: ".concat(i.status," ").concat(i.statusText,". ").concat(a));case 5:return e.n=6,i.json();case 6:return s=e.v,console.log("✅ Transcripts fetched:",s),e.a(2,s);case 7:throw e.p=7,c=e.v,console.error("Error getting transcripts:",c),c;case 8:return e.a(2)}},e,this,[[0,7]])})),function(e){return a.apply(this,arguments)})},{key:"getTranscriptEntries",value:(i=h(d().m(function e(t){var n,r,o,i,a,s,c;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getAccessToken();case 1:if(n=e.v){e.n=2;break}throw new Error("Access token not available");case 2:return r=this.proxyUrl||"http://localhost:8787",o="".concat(r,"/api/transcripts/entries?transcript=").concat(encodeURIComponent(t)),e.n=3,fetch(o,{method:"GET",headers:{"x-access-token":n,"Content-Type":"application/json"}});case 3:if((i=e.v).ok){e.n=5;break}return e.n=4,i.text();case 4:throw a=e.v,new Error("Failed to get transcript entries: ".concat(i.status," ").concat(i.statusText,". ").concat(a));case 5:return e.n=6,i.json();case 6:return s=e.v,e.a(2,s);case 7:throw e.p=7,c=e.v,console.error("Error getting transcript entries:",c),c;case 8:return e.a(2)}},e,this,[[0,7]])})),function(e){return i.apply(this,arguments)})},{key:"extractMeetingCode",value:function(e){try{var t=e.match(/meet\.google\.com\/([a-z0-9-]+)/i);return t&&t[1]?t[1]:/^[a-z]{3}-[a-z]{4}-[a-z]{3}$/i.test(e)?e:null}catch(e){return console.error("Error extracting meeting code:",e),null}}},{key:"startTranscription",value:(o=h(d().m(function e(t,n){var r,o,i,a,s,c,l,u,f,p;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Starting Google Meet transcript API..."),n){e.n=1;break}throw new Error("Access token is required. Please authenticate first.");case 1:return e.n=2,this.initializeAuth(n);case 2:if(r=this.extractMeetingCode(t)||t){e.n=3;break}throw new Error("Could not extract meeting code from URL");case 3:return console.log("Meeting code:",r),e.n=4,this.lookupSpace(r);case 4:if(o=e.v,i=(null==o?void 0:o.name)||(null==o?void 0:o.spaceName)){e.n=5;break}throw new Error("Could not get space name from lookup");case 5:return console.log("✅ Space name:",i),e.n=6,this.getConferenceRecords(i);case 6:if(a=e.v,0!==(s=(null==a?void 0:a.conferenceRecords)||[]).length){e.n=7;break}throw new Error("No conference records found. Make sure the meeting is active.");case 7:if(c=s[0],this.conferenceRecord=(null==c?void 0:c.name)||(null==c?void 0:c.conferenceRecord),this.conferenceRecord){e.n=8;break}throw new Error("Could not get conference record");case 8:return console.log("✅ Conference record:",this.conferenceRecord),e.n=9,this.getTranscripts(this.conferenceRecord);case 9:if(l=e.v,0!==(u=(null==l?void 0:l.transcripts)||[]).length){e.n=10;break}throw new Error("No transcripts found. Transcription may not be enabled for this meeting.");case 10:if(f=u[0],this.transcript=(null==f?void 0:f.name)||(null==f?void 0:f.transcript),this.transcript){e.n=11;break}throw new Error("Could not get transcript");case 11:return console.log("✅ Transcript:",this.transcript),this.isActive=!0,this.startPolling(),console.log("✅ Live transcription started successfully"),e.a(2,!0);case 12:throw e.p=12,p=e.v,console.error("Error starting transcription:",p),this.isActive=!1,this.onError&&this.onError(p),p;case 13:return e.a(2)}},e,this,[[0,12]])})),function(e,t){return o.apply(this,arguments)})},{key:"startPolling",value:function(){var e=this;this.pollInterval&&clearInterval(this.pollInterval),this.pollTranscriptEntries(),this.pollInterval=setInterval(function(){e.pollTranscriptEntries()},this.pollIntervalMs)}},{key:"pollTranscriptEntries",value:(r=h(d().m(function e(){var t,n,r,o,i,a,s=this;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.isActive&&this.transcript){e.n=1;break}return e.a(2);case 1:return e.n=2,this.getTranscriptEntries(this.transcript);case 2:t=e.v,n=(null==t?void 0:t.entries)||(null==t?void 0:t.transcriptEntries)||[],(r=n.filter(function(e){if(!s.lastEntryTime)return!0;var t=e.startTime||e.startOffset||e.timestamp;return!t||s.parseTimeToMs(t)>s.lastEntryTime})).length>0&&(this.processTranscriptEntries(r),o=r[r.length-1],(i=o.startTime||o.startOffset||o.timestamp)&&(this.lastEntryTime=this.parseTimeToMs(i))),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Error polling transcript entries:",a);case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return r.apply(this,arguments)})},{key:"parseTimeToMs",value:function(e){try{return"number"==typeof e?e:e.endsWith("s")?1e3*parseFloat(e):e.endsWith("ms")?parseFloat(e):e.includes("T")?new Date(e).getTime():parseFloat(e)}catch(t){return console.warn("Error parsing time:",e,t),Date.now()}}},{key:"processTranscriptEntries",value:function(e){var t=this;e.forEach(function(e){if(t.onTranscriptUpdate){var n,r,o,i={speakerName:(null===(n=e.participant)||void 0===n?void 0:n.displayName)||(null===(r=e.participant)||void 0===r?void 0:r.name)||e.speaker||"Unknown",speakerId:(null===(o=e.participant)||void 0===o?void 0:o.id)||e.participantId||null,timestamp:e.startTime||e.startOffset||e.timestamp||0,duration:e.endTime?t.parseTimeToMs(e.endTime)-t.parseTimeToMs(e.startTime||e.startOffset||0):e.duration||0,transcription:e.text||e.transcript||e.transcription||"",isFinal:!1!==e.isFinal,confidence:e.confidence||1};i.transcription&&i.transcription.trim()&&t.onTranscriptUpdate(i)}})}},{key:"stopTranscription",value:(n=h(d().m(function e(){var t;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("Stopping transcription..."),this.isActive=!1,this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.conferenceRecord=null,this.transcript=null,this.lastEntryTime=null,console.log("✅ Transcription stopped"),e.a(2,!0);case 1:throw e.p=1,t=e.v,console.error("Error stopping transcription:",t),t;case 2:return e.a(2)}},e,this,[[0,1]])})),function(){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.stopTranscription(),this.accessToken=null,this.onTranscriptUpdate=null,this.onError=null}}],t&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,i,a,s,c,l,u}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function w(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return b(l,"_invoke",function(n,r,o){var i,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,i=u[t],p=f.p,h=i[2];n>3?(o=h===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,o,i),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(b(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,b(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,b(d,"constructor",l),b(l,"constructor",c),c.displayName="GeneratorFunction",b(l,o,"GeneratorFunction"),b(d),b(d,o,"Generator"),b(d,r,function(){return this}),b(d,"toString",function(){return"[object Generator]"}),(w=function(){return{w:i,m:f}})()}function b(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}b=function(e,t,n,r){function i(t,n){b(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},b(e,t,n,r)}function k(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){k(i,r,o,a,s,"next",e)}function s(e){k(i,r,o,a,s,"throw",e)}a(void 0)})}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var T=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.credentials=null,this.isInitialized=!1,this.validationErrors=[]},t=[{key:"isBrowserMode",get:function(){return"undefined"!=typeof window}},{key:"initialize",value:(i=E(w().m(function e(){var t;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("🔐 Initializing secure credential manager..."),e.n=1,this.loadEnvironmentVariables();case 1:if(!this.isBrowserMode){e.n=2;break}return console.log("✅ Using Google Meet Add-ons platform authentication"),this.isInitialized=!0,e.a(2,!0);case 2:if(this.validateCredentials(),0!==this.validationErrors.length){e.n=4;break}return e.n=3,this.initializeGoogleAuth();case 3:this.isInitialized=!0,console.log("✅ Secure credential manager initialized successfully"),e.n=5;break;case 4:throw new Error("Credential validation failed: ".concat(this.validationErrors.join(", ")));case 5:return e.a(2,!0);case 6:throw e.p=6,t=e.v,console.error("❌ Failed to initialize secure credential manager:",t),t;case 7:return e.a(2)}},e,this,[[0,6]])})),function(){return i.apply(this,arguments)})},{key:"loadEnvironmentVariables",value:(o=E(w().m(function e(){var t;return w().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!this.isBrowserMode){e.n=1;break}return console.warn("⚠️ Running in browser environment - credentials should be provided securely"),this.credentials={cloudProjectNumber:process.env.CLOUD_PROJECT_NUMBER||"409997382473",deepgramApiKey:process.env.DEEPGRAM_API_KEY||"306114cbf5e0f315e34cc259af3d16b9fe000992",attendeeApiKey:process.env.ATTENDEE_API_KEY||"FMviPsiy3HSqx50aA51S4cFuTx868JBB",oauthClientId:process.env.OAUTH_CLIENT_ID||"409997382473-c9kq9iijvgibd139ngrg8acitiip22vl.apps.googleusercontent.com",proxyUrl:process.env.MEET_PROXY_URL||"http://localhost:8787",mainStageUrl:process.env.MAIN_STAGE_URL||window.location.origin+"/mainstage.html",sidePanelUrl:process.env.SIDE_PANEL_URL||window.location.origin+"/sidepanel.html",eventsBackendUrl:process.env.EVENTS_BACKEND_URL||null,nodeEnv:"production",logLevel:"info"},console.log("📋 Browser environment credentials loaded"),e.a(2);case 1:this.credentials={serviceAccountEmail:process.env.SERVICE_ACCOUNT_EMAIL,privateKey:process.env.SERVICE_ACCOUNT_PRIVATE_KEY,clientId:process.env.CLIENT_ID,cloudProjectNumber:process.env.CLOUD_PROJECT_NUMBER,deepgramApiKey:process.env.DEEPGRAM_API_KEY,attendeeApiKey:process.env.ATTENDEE_API_KEY||"",mainStageUrl:process.env.MAIN_STAGE_URL,sidePanelUrl:process.env.SIDE_PANEL_URL,nodeEnv:"production",logLevel:process.env.LOG_LEVEL||"info"},console.log("📋 Environment variables loaded"),e.n=3;break;case 2:throw e.p=2,t=e.v,console.error("❌ Error loading environment variables:",t),t;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"validateCredentials",value:function(){var e=this;this.validationErrors=[],this.isBrowserMode?console.log("✅ Skipping credential validation in browser environment"):([{key:"serviceAccountEmail",name:"SERVICE_ACCOUNT_EMAIL"},{key:"privateKey",name:"SERVICE_ACCOUNT_PRIVATE_KEY"},{key:"clientId",name:"CLIENT_ID"},{key:"cloudProjectNumber",name:"CLOUD_PROJECT_NUMBER"},{key:"deepgramApiKey",name:"DEEPGRAM_API_KEY"}].forEach(function(t){e.credentials&&e.credentials[t.key]&&"YOUR_PRIVATE_KEY_HERE"!==e.credentials[t.key]&&"YOUR_DEEPGRAM_API_KEY_HERE"!==e.credentials[t.key]||e.validationErrors.push("Missing or placeholder value for ".concat(t.name))}),this.credentials&&this.credentials.privateKey&&!this.credentials.privateKey.includes("BEGIN PRIVATE KEY")&&this.validationErrors.push("SERVICE_ACCOUNT_PRIVATE_KEY must be in PEM format"),this.credentials&&this.credentials.serviceAccountEmail&&!this.credentials.serviceAccountEmail.includes("@")&&this.validationErrors.push("SERVICE_ACCOUNT_EMAIL must be a valid email address"),this.credentials&&this.credentials.clientId&&!this.credentials.clientId.includes(".apps.googleusercontent.com")&&this.validationErrors.push("CLIENT_ID must be a valid Google OAuth client ID"),this.validationErrors.length>0?console.error("❌ Credential validation errors:",this.validationErrors):console.log("✅ All credentials validated successfully"))}},{key:"initializeGoogleAuth",value:(r=E(w().m(function e(){return w().w(function(e){for(;;)switch(e.n){case 0:try{this.isBrowserMode?(console.log("✅ Using browser-compatible authentication for Google Meet Add-ons"),this.googleAuth={isBrowserMode:!0,platform:"google-meet-addons"},console.log("✅ Browser authentication initialized")):console.warn("⚠️ Running in Node.js environment - Google Meet Add-ons require browser environment")}catch(e){console.warn("⚠️ Authentication initialization warning:",e.message)}case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getCredentials",value:function(){if(!this.isInitialized)throw new Error("Credential manager not initialized. Call initialize() first.");if(this.isBrowserMode)return{cloudProjectNumber:this.credentials.cloudProjectNumber,deepgramApiKey:this.credentials.deepgramApiKey,attendeeApiKey:this.credentials.attendeeApiKey,oauthClientId:this.credentials.oauthClientId,proxyUrl:this.credentials.proxyUrl,mainStageUrl:this.credentials.mainStageUrl,sidePanelUrl:this.credentials.sidePanelUrl,nodeEnv:this.credentials.nodeEnv,logLevel:this.credentials.logLevel,isBrowserMode:!0};if(this.validationErrors.length>0)throw new Error("Invalid credentials: ".concat(this.validationErrors.join(", ")));return{serviceAccountEmail:this.credentials.serviceAccountEmail,privateKey:this.credentials.privateKey,clientId:this.credentials.clientId,cloudProjectNumber:this.credentials.cloudProjectNumber,deepgramApiKey:this.credentials.deepgramApiKey,mainStageUrl:this.credentials.mainStageUrl,sidePanelUrl:this.credentials.sidePanelUrl,nodeEnv:this.credentials.nodeEnv,logLevel:this.credentials.logLevel}}},{key:"getGoogleAuthClient",value:(n=E(w().m(function e(){return w().w(function(e){for(;;)switch(e.n){case 0:if(this.isInitialized){e.n=1;break}throw new Error("Credential manager not initialized");case 1:if(!this.googleAuth||!this.googleAuth.isBrowserMode){e.n=2;break}return e.a(2,{isBrowserMode:!0,platform:"google-meet-addons",getAccessToken:function(){var e=E(w().m(function e(){return w().w(function(e){for(;;)if(0===e.n)return console.log("Using Google Meet Add-ons platform authentication"),e.a(2,{token:"platform-managed"})},e)}));return function(){return e.apply(this,arguments)}}()});case 2:return e.a(2,null)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"isValid",value:function(){return this.isInitialized&&(this.isBrowserMode||0===this.validationErrors.length)}},{key:"getValidationErrors",value:function(){return this.validationErrors}},{key:"logSecurityStatus",value:function(){var e,t;console.log("🔒 Security Status:"),console.log("  - Credential Manager Initialized: ".concat(this.isInitialized)),console.log("  - Browser Mode: ".concat(this.isBrowserMode)),console.log("  - Validation Errors: ".concat(this.validationErrors.length)),console.log("  - Environment: ".concat((null===(e=this.credentials)||void 0===e?void 0:e.nodeEnv)||"unknown")),console.log("  - Log Level: ".concat((null===(t=this.credentials)||void 0===t?void 0:t.logLevel)||"unknown")),this.validationErrors.length>0&&console.log("  - Validation Errors:",this.validationErrors)}}],t&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,i}());function I(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return x(l,"_invoke",function(n,r,o){var i,s,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,a}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,i=u[t],p=f.p,h=i[2];n>3?(o=h===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),s=u,c=h;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,o,i),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(x(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,x(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,x(d,"constructor",l),x(l,"constructor",c),c.displayName="GeneratorFunction",x(l,o,"GeneratorFunction"),x(d),x(d,o,"Generator"),x(d,r,function(){return this}),x(d,"toString",function(){return"[object Generator]"}),(I=function(){return{w:i,m:f}})()}function x(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}x=function(e,t,n,r){function i(t,n){x(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},x(e,t,n,r)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){j(i,r,o,a,s,"next",e)}function s(e){j(i,r,o,a,s,"throw",e)}a(void 0)})}}var N,O,_,z=null,L=null,R=null,G=new Map,D=!1,B=null,F=null;function K(){return $.apply(this,arguments)}function $(){return($=U(I().m(function e(){var t,n;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("🔐 Initializing secure credentials..."),e.n=1,T.initialize();case 1:return z=T.getCredentials(),L=z.cloudProjectNumber,z.deepgramApiKey,z.attendeeApiKey,R=z.mainStageUrl,T.logSecurityStatus(),console.log("✅ Secure credentials initialized successfully"),e.a(2,!0);case 2:throw e.p=2,n=e.v,console.error("❌ Failed to initialize secure credentials:",n),(t=T.getValidationErrors()).length>0&&(console.error("Validation errors:",t),console.error("Please check your configuration and ensure all required credentials are set.")),n;case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function J(){return V.apply(this,arguments)}function V(){return V=U(I().m(function e(){var t,n,r,o=arguments;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,e.p=1,console.log("Initializing Meet Media API..."),z){e.n=2;break}throw new Error("Credentials not initialized. Call initializeSecureCredentials() first.");case 2:return t&&(z.meetSession=t,console.log("✅ Meet session added to credentials for real API access")),(F=new l(z)).onParticipantJoined=function(e){console.log("Participant joined:",e),G.set(e.id,e),oe()},F.onParticipantLeft=function(e){console.log("Participant left:",e),G.delete(e.id),oe()},F.onAudioData=function(e){W(e)},F.onError=function(e){console.error("Meet Media API error:",e),Se("Meet Media API error: "+e.message,"error")},e.n=3,F.initializeAuth();case 3:return console.log("✅ Meet Media API initialized successfully"),console.log("📋 Note: This implementation uses the official Google Meet Media API"),console.log("📋 Requirements: Google Meet REST API must be enabled and Developer Preview enrollment"),e.p=4,e.n=5,F.startParticipantTracking();case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.warn("Participant tracking failed to start:",n);case 7:return e.a(2,!0);case 8:return e.p=8,r=e.v,console.error("❌ Failed to initialize Meet Media API:",r),Se("Failed to initialize Meet Media API: "+r.message,"error"),e.a(2,!1)}},e,null,[[4,6],[1,8]])})),V.apply(this,arguments)}function W(e){var t=e.participantId,n=e.participantName;e.audioData,e.timestamp,console.log("Audio from ".concat(n," (").concat(t,")"))}function q(){console.log("Initializing Google Meet Transcript API...");try{(B=new m(z)).onTranscriptUpdate=function(e){!function(e){var t=e.speakerName,n=e.transcription,r=e.timestamp,o=e.duration;if(n&&n.trim()){var i,a=null,s=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=M(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(a)throw o}}}}(G.entries());try{for(s.s();!(i=s.n()).done;){var c=P(i.value,2),l=(c[0],c[1]);if(l.name===t||l.name.toLowerCase()===t.toLowerCase()){a=l;break}}}catch(e){s.e(e)}finally{s.f()}a||(a={id:"speaker_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2)),name:t,email:"",isLocal:!1,isSpeaking:!0,avatar:"👤",transcript:"",lastSpoke:null,joinedAt:(new Date).toISOString(),entries:[]},G.set(a.id,a));var u={text:n,timestamp:r,duration:o,timestampMs:Date.now()};a.entries||(a.entries=[]),a.entries.push(u),a.transcript+=(a.transcript?" ":"")+n,a.isSpeaking=!0,a.lastSpoke=(new Date).toLocaleTimeString(),oe(),setTimeout(function(){a&&(a.isSpeaking=!1,oe())},3e3),console.log("".concat(t,": ").concat(n))}}(e)},B.onError=function(e){console.error("Google Meet Transcript API error:",e),Se("Transcript API error: "+e.message,"error")},console.log("✅ Google Meet Transcript API initialized successfully")}catch(e){console.error("Error initializing Google Meet Transcript API:",e),Se("Error initializing Transcript API: "+e.message,"error")}}function Y(){return H.apply(this,arguments)}function H(){return(H=U(I().m(function e(){var n,r,o,i,a,s;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,K();case 1:return e.n=2,t.addon.createAddonSession({cloudProjectNumber:L});case 2:return n=e.v,e.n=3,n.createSidePanelClient();case 3:return N=e.v,e.n=4,J(n);case 4:if(e.v){e.n=5;break}throw new Error("Failed to initialize Meet Media API");case 5:r=document.getElementById("start-activity"),o=document.getElementById("start-transcript"),i=document.getElementById("stop-transcript"),(a=document.getElementById("oauth-authorize-btn"))&&a.addEventListener("click",U(I().m(function e(){return I().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fe();case 1:return e.a(2)}},e)}))),r&&r.addEventListener("click",U(I().m(function e(){var t;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,N.startActivity({mainStageUrl:R});case 1:Se("Activity started successfully!","success"),e.n=3;break;case 2:e.p=2,t=e.v,console.error("Error starting activity:",t),Se("Error starting activity: "+t.message,"error");case 3:return e.a(2)}},e,null,[[0,2]])}))),o&&o.addEventListener("click",ie),i&&i.addEventListener("click",ke),q(),console.log("Add-on initialized successfully"),Se("Add-on loaded successfully!","success"),e.n=7;break;case 6:e.p=6,s=e.v,console.error("Error setting up add-on:",s),Se("Error initializing add-on: "+s.message,"error");case 7:return e.a(2)}},e,null,[[0,6]])}))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=U(I().m(function e(){var n,r;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,z){e.n=1;break}return e.n=1,K();case 1:return e.n=2,t.addon.createAddonSession({cloudProjectNumber:L});case 2:return n=e.v,e.n=3,n.createMainStageClient();case 3:return O=e.v,F&&z&&(z.meetSession=n,console.log("✅ Meet session updated for main stage")),re(),e.n=4,Q();case 4:console.log("Main stage initialized successfully"),e.n=6;break;case 5:e.p=5,r=e.v,console.error("Error initializing main stage:",r);case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}function Q(){return ee.apply(this,arguments)}function ee(){return(ee=U(I().m(function e(){var t,n;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Joining current meeting as media bot..."),F){e.n=1;break}throw new Error("Meet Media API not initialized");case 1:return e.n=2,te();case 2:if(!(t=e.v)){e.n=4;break}return e.n=3,F.joinConference(t);case 3:console.log("✅ Successfully joined conference using Meet Media API"),e.n=5;break;case 4:console.log("No active meeting found, using fallback mode"),console.log("📋 Note: Conference ID is required for Meet Media API access");case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error("Error joining meeting:",n),Se("Error joining meeting: "+n.message,"error");case 7:return e.a(2)}},e,null,[[0,6]])}))).apply(this,arguments)}function te(){return ne.apply(this,arguments)}function ne(){return(ne=U(I().m(function e(){var t,n,r,o,i;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!O||!O.getMeetingInfo){e.n=2;break}return e.n=1,O.getMeetingInfo();case 1:return t=e.v,e.a(2,(null==t?void 0:t.meetingId)||(null==t?void 0:t.id));case 2:if(!N||!N.getMeetingInfo){e.n=4;break}return e.n=3,N.getMeetingInfo();case 3:return n=e.v,e.a(2,(null==n?void 0:n.meetingId)||(null==n?void 0:n.id));case 4:if(r=new URLSearchParams(window.location.search),!(o=r.get("meetingId")||r.get("id"))){e.n=5;break}return e.a(2,o);case 5:if(!window.meet||!window.meet.getMeetingId){e.n=7;break}return e.n=6,window.meet.getMeetingId();case 6:return e.a(2,e.v);case 7:return e.a(2,null);case 8:return e.p=8,i=e.v,console.error("Error getting meeting ID:",i),e.a(2,null)}},e,null,[[0,8]])}))).apply(this,arguments)}function re(){var e,t,n=document.createElement("div");n.id="transcript-container",n.style.cssText="\n    width: 100%;\n    height: 100vh;\n    padding: 20px;\n    font-family: 'Google Sans', Arial, sans-serif;\n    background: #f8f9fa;\n    box-sizing: border-box;\n  ";var r=document.createElement("div");r.style.cssText="\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    margin-bottom: 20px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  ",r.innerHTML='\n    <h1 style="color: #1a73e8; margin: 0 0 20px 0; font-size: 28px;">🎤 Live Transcript</h1>\n    <div style="display: flex; gap: 10px; margin-bottom: 10px;">\n      <button id="start-transcript-btn" style="\n        padding: 12px 24px; \n        background: #34a853; \n        color: white; \n        border: none; \n        border-radius: 6px; \n        cursor: pointer;\n        font-size: 16px;\n        font-weight: 500;\n        transition: background-color 0.2s;\n      ">Start Live Transcript</button>\n      <button id="stop-transcript-btn" style="\n        padding: 12px 24px; \n        background: #ea4335; \n        color: white; \n        border: none; \n        border-radius: 6px; \n        cursor: pointer;\n        font-size: 16px;\n        font-weight: 500;\n        transition: background-color 0.2s;\n        opacity: 0.6;\n        cursor: not-allowed;\n      " disabled>Stop Transcript</button>\n    </div>\n    <div id="transcript-status" style="\n      padding: 10px;\n      border-radius: 4px;\n      font-size: 14px;\n      background: #e8f0fe;\n      color: #1a73e8;\n      display: none;\n    ">Ready to start transcription</div>\n  ';var o=document.createElement("div");o.id="transcript-area",o.style.cssText="\n    background: white;\n    border: 1px solid #dadce0;\n    border-radius: 8px;\n    padding: 20px;\n    height: calc(100vh - 200px);\n    overflow-y: auto;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  ",n.appendChild(r),n.appendChild(o),document.body.appendChild(n),_=o,null===(e=document.getElementById("start-transcript-btn"))||void 0===e||e.addEventListener("click",ie),null===(t=document.getElementById("stop-transcript-btn"))||void 0===t||t.addEventListener("click",ke)}function oe(){if(_)if(_.innerHTML="",0!==G.size){if(G.forEach(function(e,t){var n=document.createElement("div");n.style.cssText="\n      margin-bottom: 20px;\n      padding: 20px;\n      border: 2px solid ".concat(e.isSpeaking?"#1a73e8":"#e0e0e0",";\n      border-radius: 12px;\n      background: ").concat(e.isSpeaking?"#e8f0fe":"#ffffff",";\n      transition: all 0.3s ease;\n      position: relative;\n    ");var r=e.isSpeaking?'\n      <div style="\n        position: absolute;\n        top: 10px;\n        right: 15px;\n        background: #1a73e8;\n        color: white;\n        padding: 4px 8px;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 500;\n        animation: pulse 1s infinite;\n      ">🎤 Speaking</div>\n    ':"";n.innerHTML="\n      ".concat(r,'\n      <div style="\n        display: flex;\n        align-items: center;\n        margin-bottom: 15px;\n        font-weight: 600;\n        color: #1a73e8;\n        font-size: 18px;\n      ">\n        <span style="font-size: 24px; margin-right: 10px;">').concat(e.isLocal?"👤":"👥","</span>\n        ").concat(e.name,'\n      </div>\n      <div style="\n        color: #5f6368;\n        line-height: 1.6;\n        font-size: 16px;\n        min-height: 24px;\n      ">\n        ').concat(e.transcript||'<span style="color: #9aa0a6; font-style: italic;">No transcript yet...</span>',"\n      </div>\n      ").concat(e.lastSpoke?'\n        <div style="\n          color: #9aa0a6;\n          font-size: 12px;\n          margin-top: 10px;\n          text-align: right;\n        ">\n          Last spoke: '.concat(e.lastSpoke,"\n        </div>\n      "):"","\n    "),_.appendChild(n)}),!document.getElementById("transcript-styles")){var e=document.createElement("style");e.id="transcript-styles",e.textContent="\n      @keyframes pulse {\n        0% { opacity: 1; }\n        50% { opacity: 0.5; }\n        100% { opacity: 1; }\n      }\n    ",document.head.appendChild(e)}}else _.innerHTML='\n      <div style="\n        text-align: center; \n        color: #5f6368; \n        padding: 40px;\n        font-size: 16px;\n      ">\n        No participants detected. Waiting for participants to join...\n      </div>\n    '}function ie(){return ae.apply(this,arguments)}function ae(){return(ae=U(I().m(function e(){var t,n,r,o,i,a,s,c,l,u,d,f,p;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(console.log("Starting transcript with Google Meet API..."),e.p=1,B){e.n=2;break}throw new Error("Google Meet Transcript API not initialized.");case 2:if(n=document.getElementById("start-transcript")||document.getElementById("start-transcript-btn"),r=document.getElementById("stop-transcript")||document.getElementById("stop-transcript-btn"),o=document.getElementById("transcript-status"),i=document.getElementById("meeting-url-input-container"),a=document.getElementById("meeting-url-input"),s=null==a||null===(t=a.value)||void 0===t?void 0:t.trim()){e.n=4;break}return e.n=3,se();case 3:s=e.v;case 4:if(s){e.n=5;break}throw i&&(i.style.display="block"),new Error("Could not detect meeting code. Please enter it manually.");case 5:return n&&(n.disabled=!0),r&&(r.disabled=!1),o&&(o.style.display="block",o.style.background="#e8f0fe",o.style.color="#1a73e8",o.textContent="🔄 Connecting to Google Meet API and starting transcription..."),e.n=6,le();case 6:if(c=e.v){e.n=8;break}return o&&(o.style.background="#fff3cd",o.style.color="#856404",o.textContent="⚠️ Authentication required. Please enter your access token."),e.n=7,we();case 7:if(c=e.v){e.n=8;break}throw new Error("Access token is required to use Google Meet API. Please authenticate.");case 8:return e.n=9,B.startTranscription(s,c);case 9:i&&(i.style.display="none"),D=!0,o&&(o.style.background="#e8f5e8",o.style.color="#137333",o.textContent="🎤 Live transcription active - receiving transcripts from Google Meet API"),console.log("✅ Transcription started successfully with Google Meet API"),e.n=11;break;case 10:e.p=10,p=e.v,console.error("Error starting transcription:",p),Se("Error starting transcription: "+p.message,"error"),(p.message.includes("Could not detect")||p.message.includes("meeting code"))&&(l=document.getElementById("meeting-url-input-container"))&&(l.style.display="block"),u=document.getElementById("start-transcript")||document.getElementById("start-transcript-btn"),d=document.getElementById("stop-transcript")||document.getElementById("stop-transcript-btn"),f=document.getElementById("transcript-status"),u&&(u.disabled=!1),d&&(d.disabled=!0),f&&(f.style.background="#fce8e6",f.style.color="#d93025",f.textContent="❌ Failed to start transcription: "+p.message);case 11:return e.a(2)}},e,null,[[1,10]])}))).apply(this,arguments)}function se(){return ce.apply(this,arguments)}function ce(){return(ce=U(I().m(function e(){var t,n,r,o,i,a,s,c;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!N){e.n=3;break}return e.n=1,null===(n=(r=N).getMeetingInfo)||void 0===n?void 0:n.call(r);case 1:if(null==(o=e.v)||!o.meetingCode){e.n=2;break}return e.a(2,o.meetingCode);case 2:if(null==o||!o.meetingUrl){e.n=3;break}return e.a(2,o.meetingUrl);case 3:if(null===(t=z)||void 0===t||!t.meetSession){e.n=6;break}return e.n=4,null===(i=(a=z.meetSession).getMeetingInfo)||void 0===i?void 0:i.call(a);case 4:if(null==(s=e.v)||!s.meetingCode){e.n=5;break}return e.a(2,s.meetingCode);case 5:if(null==s||!s.meetingUrl){e.n=6;break}return e.a(2,s.meetingUrl);case 6:return e.a(2,null);case 7:return e.p=7,c=e.v,console.warn("Error getting meeting code from session:",c),e.a(2,null)}},e,null,[[0,7]])}))).apply(this,arguments)}function le(){return ue.apply(this,arguments)}function ue(){return(ue=U(I().m(function e(){var t,n,r,o,i,a,s,c,l,u,d,f,p,h,g,y,m;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,console.log("Attempting to get access token from Meet session..."),!N){e.n=5;break}if(e.p=1,!N.getAccessToken){e.n=3;break}return e.n=2,N.getAccessToken();case 2:if(r=e.v,!(o=(null==r?void 0:r.token)||(null==r?void 0:r.accessToken)||r)||"platform-managed"===o){e.n=3;break}return console.log("✅ Got access token from sidePanelClient"),e.a(2,o);case 3:e.n=5;break;case 4:e.p=4,f=e.v,console.warn("Error getting token from sidePanelClient:",f);case 5:if(!O){e.n=10;break}if(e.p=6,!O.getAccessToken){e.n=8;break}return e.n=7,O.getAccessToken();case 7:if(i=e.v,!(a=(null==i?void 0:i.token)||(null==i?void 0:i.accessToken)||i)||"platform-managed"===a){e.n=8;break}return console.log("✅ Got access token from mainStageClient"),e.a(2,a);case 8:e.n=10;break;case 9:e.p=9,p=e.v,console.warn("Error getting token from mainStageClient:",p);case 10:if(null===(t=z)||void 0===t||!t.meetSession){e.n=16;break}if(e.p=11,!z.meetSession.getAccessToken){e.n=13;break}return e.n=12,z.meetSession.getAccessToken();case 12:if(s=e.v,!(c=(null==s?void 0:s.token)||(null==s?void 0:s.accessToken)||s)||"platform-managed"===c){e.n=13;break}return console.log("✅ Got access token from meetSession"),e.a(2,c);case 13:if(!z.meetSession.token){e.n=14;break}return console.log("✅ Got access token from meetSession.token"),e.a(2,z.meetSession.token);case 14:e.n=16;break;case 15:e.p=15,h=e.v,console.warn("Error getting token from meetSession:",h);case 16:if(null===(n=z)||void 0===n||!n.accessToken){e.n=17;break}return console.log("✅ Using access token from credentials"),e.a(2,z.accessToken);case 17:if(!(window.google&&window.google.accounts&&window.google.accounts.oauth2)){e.n=22;break}return e.p=18,e.n=19,ge();case 19:if(!(l=e.v)){e.n=20;break}return console.log("✅ Got access token from Google OAuth"),e.a(2,l);case 20:e.n=22;break;case 21:e.p=21,g=e.v,console.warn("Error getting token from Google OAuth:",g);case 22:if(window.google&&window.google.accounts){e.n=29;break}return console.log("Loading Google Identity Services..."),e.n=23,de();case 23:return e.n=24,new Promise(function(e){return setTimeout(e,1e3)});case 24:if(!(window.google&&window.google.accounts&&window.google.accounts.oauth2)){e.n=29;break}return e.p=25,e.n=26,ge();case 26:if(!(u=e.v)){e.n=27;break}return console.log("✅ Got access token from Google OAuth"),e.a(2,u);case 27:e.n=29;break;case 28:e.p=28,y=e.v,console.warn("Error getting token from Google OAuth:",y);case 29:return console.warn("⚠️ Access token not found. Starting OAuth flow..."),e.n=30,me();case 30:return d=e.v,e.a(2,d);case 31:return e.p=31,m=e.v,console.error("Error getting access token:",m),e.n=32,we();case 32:return e.a(2,e.v)}},e,null,[[25,28],[18,21],[11,15],[6,9],[1,4],[0,31]])}))).apply(this,arguments)}function de(){return new Promise(function(e){if(window.google&&window.google.accounts)e();else{var t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t.onload=function(){console.log("Google Identity Services loaded"),e()},t.onerror=function(){console.warn("Failed to load Google Identity Services"),e()},document.head.appendChild(t)}})}function fe(){return pe.apply(this,arguments)}function pe(){return(pe=U(I().m(function e(){var t,n,r,o,i,a;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.getElementById("oauth-authorize-btn"),document.getElementById("auth-status"),n=document.getElementById("oauth-client-id")){e.n=1;break}return he("Error: Client ID input field not found","error"),e.a(2);case 1:if(r=n.value.trim()){e.n=2;break}return he("Please enter your OAuth Web Client ID","error"),e.a(2);case 2:return z&&(z.oauthClientId=r),t&&(t.disabled=!0,t.textContent="⏳ Authorizing..."),he("Loading Google Identity Services...","info"),e.p=3,e.n=4,de();case 4:o=0;case 5:if(window.google&&window.google.accounts&&window.google.accounts.oauth2||!(o<10)){e.n=7;break}return e.n=6,new Promise(function(e){return setTimeout(e,200)});case 6:o++,e.n=5;break;case 7:if(window.google&&window.google.accounts&&window.google.accounts.oauth2){e.n=8;break}throw new Error("Google Identity Services failed to load. Please refresh the page.");case 8:return he("Requesting authorization...","info"),e.n=9,ge(r);case 9:if(!(i=e.v)){e.n=10;break}he("✅ Authorization successful! Access token acquired.","success"),t&&(t.textContent="✅ Authorized",t.style.background="#34a853"),z&&(z.accessToken=i),e.n=11;break;case 10:throw new Error("Failed to get access token");case 11:e.n=13;break;case 12:e.p=12,a=e.v,console.error("OAuth authorization error:",a),he("❌ Authorization failed: "+(a.message||"Unknown error"),"error"),t&&(t.disabled=!1,t.textContent="🔐 Authorize",t.style.background="#4285f4"),a.message&&a.message.includes("redirect_uri_mismatch")?he('❌ Error: redirect_uri_mismatch\n\nTo fix this in Google Cloud Console:\n1. Go to APIs & Services → Credentials\n2. Click your OAuth 2.0 Client ID\n3. Under "Authorized redirect URIs", click "+ Add URI"\n4. Add: http://localhost:8081\n5. Add: http://127.0.0.1:8081\n6. Click "Save"\n7. Wait 2-5 minutes, then try again\n\nNote: Redirect URIs are required for GSI popup-based OAuth',"error"):a.message&&a.message.includes("popup_closed")?he("❌ Popup was closed. Please click Authorize again and complete the authorization. Make sure popups are allowed for this site.","error"):a.message&&a.message.includes("access_denied")&&he("❌ Authorization denied. Please try again and grant all requested permissions.","error");case 13:return e.a(2)}},e,null,[[3,12]])}))).apply(this,arguments)}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.getElementById("auth-status");if(n){if(e.includes("\n")||e.includes("<")){var r=e.replace(/\n/g,"<br>");n.innerHTML=r}else n.textContent=e;n.style.display="block","success"===t?(n.style.background="#e8f5e8",n.style.color="#137333",n.style.border="1px solid #34a853"):"error"===t?(n.style.background="#fce8e6",n.style.color="#d93025",n.style.border="1px solid #ea4335"):(n.style.background="#e8f0fe",n.style.color="#1a73e8",n.style.border="1px solid #1a73e8")}}function ge(){return ye.apply(this,arguments)}function ye(){return ye=U(I().m(function e(){var t,n=arguments;return I().w(function(e){for(;;)if(0===e.n)return t=n.length>0&&void 0!==n[0]?n[0]:null,e.a(2,new Promise(function(e,n){if(window.google&&window.google.accounts&&window.google.accounts.oauth2){var r,o=t;if(!o){var i=document.getElementById("oauth-client-id");i&&(o=i.value.trim())}if(o||(o=(null===(r=z)||void 0===r?void 0:r.oauthClientId)||"409997382473-c9kq9iijvgibd139ngrg8acitiip22vl.apps.googleusercontent.com"),o)try{window.google.accounts.oauth2.initTokenClient({client_id:o,scope:["https://www.googleapis.com/auth/meetings.space.readonly","https://www.googleapis.com/auth/meetings.conference.media.audio.readonly","https://www.googleapis.com/auth/documents.readonly"].join(" "),callback:function(t){if(t&&t.access_token){var r=t.access_token;console.log("✅ OAuth access token acquired"),z&&(z.accessToken=r,z.oauthClientId=o),e(r)}else t&&t.error?n(new Error(t.error+(t.error_description?": "+t.error_description:""))):n(new Error("Failed to get access token from OAuth"))},error_callback:function(e){console.error("OAuth error:",e);var t=e.message||e.type||"OAuth authorization failed";n(new Error(t))}}).requestAccessToken({prompt:"consent"})}catch(e){n(e)}else n(new Error("OAuth Client ID not configured"))}else n(new Error("Google Identity Services not available"))}))},e)})),ye.apply(this,arguments)}function me(){return ve.apply(this,arguments)}function ve(){return(ve=U(I().m(function e(){return I().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){var t=document.getElementById("auth-token-input-container");if(document.getElementById("auth-token-input"),t){t.innerHTML='\n        <div style="margin-bottom: 10px;">\n          <strong style="color: #856404;">🔐 Google OAuth Authorization Required</strong>\n        </div>\n        <div style="font-size: 12px; color: #856404; margin-bottom: 15px;">\n          Click the button below to authorize with Google. This will open a popup to grant permissions.\n        </div>\n        <button id="oauth-authorize-btn" class="btn btn-success" style="width: 100%; background: #4285f4;">\n          🔐 Authorize with Google\n        </button>\n        <div style="font-size: 11px; color: #856404; margin-top: 10px; text-align: center;">\n          Or <a href="#" id="manual-token-link" style="color: #1a73e8;">enter token manually</a>\n        </div>\n      ',t.style.display="block";var n=document.getElementById("oauth-authorize-btn"),r=document.getElementById("manual-token-link");n&&n.addEventListener("click",U(I().m(function o(){var i,a;return I().w(function(o){for(;;)switch(o.p=o.n){case 0:return n.disabled=!0,n.textContent="⏳ Authorizing...",o.p=1,o.n=2,de();case 2:return o.n=3,new Promise(function(e){return setTimeout(e,500)});case 3:return o.n=4,ge();case 4:if(!(i=o.v)){o.n=5;break}t.style.display="none",e(i),o.n=6;break;case 5:throw new Error("Authorization failed");case 6:o.n=8;break;case 7:o.p=7,a=o.v,console.error("OAuth authorization error:",a),n.disabled=!1,n.textContent="🔐 Authorize with Google",alert("Authorization failed: "+(a.message||"Unknown error")),r&&r.click();case 8:return o.a(2)}},o,null,[[1,7]])}))),r&&r.addEventListener("click",function(n){n.preventDefault(),t.innerHTML='\n            <label for="auth-token-input" style="display: block; margin-bottom: 8px; font-size: 14px; color: #856404; font-weight: 500;">\n              🔐 Google OAuth Access Token (Manual Entry):\n            </label>\n            <input type="password" id="auth-token-input" placeholder="Enter your Google OAuth access token..." \n                   style="width: 100%; padding: 8px; border: 1px solid #dadce0; border-radius: 4px; font-size: 13px; margin-bottom: 8px;">\n            <div style="font-size: 12px; color: #856404; margin-bottom: 10px;">\n              <strong>How to get access token:</strong><br>\n              1. Go to <a href="https://console.cloud.google.com/" target="_blank" style="color: #1a73e8;">Google Cloud Console</a><br>\n              2. Enable Google Meet API<br>\n              3. Create OAuth 2.0 credentials<br>\n              4. Use OAuth 2.0 Playground or generate token\n            </div>\n            <button id="save-auth-token" class="btn btn-success" style="width: 100%;">\n              Save Token & Continue\n            </button>\n          ';var r=document.getElementById("auth-token-input"),o=document.getElementById("save-auth-token");if(o&&r){var i=function(){var n=r.value.trim();n?(z&&(z.accessToken=n),t.style.display="none",e(n)):alert("Please enter a valid access token")};o.addEventListener("click",i),r.addEventListener("keypress",function(e){"Enter"===e.key&&i()}),r.focus()}})}else try{var o=prompt("Google Meet API requires OAuth authorization.\n\nEnter your Google OAuth access token:");o&&o.trim()?(z&&(z.accessToken=o.trim()),e(o.trim())):e(null)}catch(t){e(null)}}))},e)}))).apply(this,arguments)}function we(){return be.apply(this,arguments)}function be(){return(be=U(I().m(function e(){return I().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,me();case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function ke(){return Ee.apply(this,arguments)}function Ee(){return(Ee=U(I().m(function e(){var t,n,r,o;return I().w(function(e){for(;;)switch(e.p=e.n){case 0:if(console.log("Stopping transcript..."),e.p=1,!B||!D){e.n=2;break}return e.n=2,B.stopTranscription();case 2:D=!1,t=document.getElementById("start-transcript-btn"),n=document.getElementById("stop-transcript-btn"),r=document.getElementById("transcript-status"),t&&(t.disabled=!1),n&&(n.disabled=!0),r&&(r.style.background="#fce8e6",r.style.color="#d93025",r.textContent="⏹️ Transcription stopped"),console.log("✅ Transcription stopped successfully"),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error stopping transcription:",o),Se("Error stopping transcription: "+o.message,"error");case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.getElementById("status");n&&(n.textContent=e,n.className="status ".concat(t),n.style.display="block",setTimeout(function(){n.style.display="none"},5e3))}export{X as initializeMainStage,Y as setUpAddon};
//# sourceMappingURL=bundle.js.map